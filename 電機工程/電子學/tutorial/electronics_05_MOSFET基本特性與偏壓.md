# 電子學（五）：MOSFET 基本特性與偏壓

## 🔰 本章基礎觀念（零基礎必讀）

### 為什麼 MOSFET 如此重要？

如果說 BJT 是類比電路的經典元件，那 **MOSFET（Metal-Oxide-Semiconductor Field-Effect Transistor，金屬-氧化物-半導體場效電晶體）** 就是**現代 IC 的絕對主角**。

你手機裡的處理器可能有上百億個 MOSFET。為什麼？

- **極低的功率消耗**（閘極幾乎不消耗電流）
- **可以做得非常小**（奈米級）
- **製程容易整合**（CMOS 技術）
- **開關速度極快**

> **白話比喻**：如果 BJT 是「用水流大小來控制水閘」（電流驅動），MOSFET 就是「用遙控器的信號來控制水閘」（電壓驅動）——遙控器本身幾乎不需要能量。

### MOSFET 的三隻腳

- **閘極（Gate, G）**：控制端，像遙控器
- **汲極（Drain, D）**：電流流入的端子（NMOS）
- **源極（Source, S）**：電流流出的端子（NMOS）
- （還有一個**基體/體端 Body, B**，通常接到源極或電源/地）

> **最重要的一句話**：用閘極電壓 VGS 來控制汲極電流 ID。**閘極不流電流（IG ≈ 0）！**

---

## 一、MOSFET 的結構

### 1.1 增強型 NMOS（Enhancement NMOS）——最常見

**結構**（由上到下）：
1. **閘極（Gate）**：金屬或多晶矽
2. **閘極氧化層（Gate Oxide）**：SiO₂，非常薄（幾奈米）
3. **P型基板（P-type Substrate）**：主體
4. **N⁺ 源極和汲極區域**：重摻雜的 N 型區域

**工作原理**：
- VGS = 0：源極和汲極之間被 P 型基板隔開（兩個反偏的 PN 接面），**不導通**
- VGS > Vth：閘極正電壓吸引基板中的電子到表面，形成**反轉層（Inversion Layer）**，也就是**通道（Channel）**
- 通道形成後，電子可以從源極流到汲極

### 1.2 增強型 PMOS（Enhancement PMOS）

- 在 N 型基板上做
- 所有電壓極性相反
- VGS < -|Vth| 時導通
- 載子是電洞

### 1.3 NMOS vs PMOS 比較

| 特性 | NMOS | PMOS |
|------|------|------|
| 基板 | P 型 | N 型 |
| 通道載子 | 電子 | 電洞 |
| 閾值電壓 | Vth > 0 | Vth < 0 |
| 導通條件 | VGS > Vth | VGS < Vth (VSG > |Vth|) |
| 電流方向 | D → S | S → D |
| 載子遷移率 | 較高（μn ≈ 2~3μp） | 較低 |
| 速度 | **較快** | 較慢 |

---

## 二、閾值電壓（Threshold Voltage, Vth）

### 2.1 定義

**Vth 是通道剛好形成時的 VGS 值。**

- NMOS：Vth > 0（典型值 0.4 ~ 1.0 V）
- PMOS：Vth < 0（典型值 -0.4 ~ -1.0 V）

### 2.2 影響 Vth 的因素

1. **閘極氧化層厚度 tox**：越薄，|Vth| 越低
2. **基板摻雜濃度**：越高，|Vth| 越高
3. **體效應（Body Effect）**：VSB ≠ 0 時，Vth 會改變

$$V_{th} = V_{th0} + \gamma(\sqrt{2\phi_F + V_{SB}} - \sqrt{2\phi_F})$$

其中 γ 是體效應係數（body effect coefficient）。

---

## 三、三個操作區域（NMOS 為例）

### 3.1 截止區（Cutoff）

**條件**：VGS < Vth

**結果**：通道不存在，ID = 0

> **白話**：電壓還不夠大，無法吸引足夠的電子來形成通道。

### 3.2 線性區 / 三極管區（Triode / Linear Region）

**條件**：VGS > Vth **且** VDS < VGS - Vth（= VOV，過驅電壓）

**電流方程**：

$$I_D = \mu_n C_{ox} \frac{W}{L} \left[ (V_{GS} - V_{th})V_{DS} - \frac{V_{DS}^2}{2} \right]$$

當 VDS 很小時（深線性區）：

$$I_D \approx \mu_n C_{ox} \frac{W}{L} (V_{GS} - V_{th}) V_{DS}$$

MOSFET 等效為一個**電壓控制的電阻**：

$$R_{DS(on)} = \frac{1}{\mu_n C_{ox} (W/L)(V_{GS} - V_{th})}$$

> **白話**：通道已經形成，但源極端和汲極端的通道厚度差不多，VDS 改變 ID 幾乎線性變化。

### 3.3 飽和區（Saturation Region）——放大器工作區

**條件**：VGS > Vth **且** VDS ≥ VGS - Vth（= VOV）

也就是 VGD ≤ Vth（汲極端的通道被「夾斷 Pinch-off」）

**電流方程**：

$$I_D = \frac{1}{2} \mu_n C_{ox} \frac{W}{L} (V_{GS} - V_{th})^2 (1 + \lambda V_{DS})$$

忽略通道長度調變時：

$$I_D = \frac{1}{2} \mu_n C_{ox} \frac{W}{L} (V_{GS} - V_{th})^2 = \frac{1}{2} k_n' \frac{W}{L} V_{OV}^2$$

其中：
- μn：電子遷移率
- Cox：單位面積閘極氧化層電容
- W/L：通道寬長比
- VOV = VGS - Vth：過驅電壓（Overdrive Voltage）
- kn' = μnCox：製程轉導參數
- λ：通道長度調變係數

> **白話**：通道在汲極端被夾斷，電流主要由 VGS 控制，與 VDS 幾乎無關（理想情況下）。

### 3.4 操作區域判斷流程

```
VGS < Vth? ──是──> 截止區（ID = 0）
    │
    否
    │
VDS < VOV? ──是──> 線性區
    │
    否
    │
    └──> 飽和區
```

其中 VOV = VGS - Vth

### 數值例題 5.1：判斷操作區域

> **題目**：NMOS，Vth = 0.8V，kn'(W/L) = 2 mA/V²。
> 分別判斷以下情況的操作區域並求 ID：
> (a) VGS = 2V, VDS = 0.5V
> (b) VGS = 2V, VDS = 3V
> (c) VGS = 0.5V, VDS = 3V
>
> **解答**：
>
> **(a)** VOV = VGS - Vth = 2 - 0.8 = 1.2V
> VDS = 0.5V < VOV = 1.2V → **線性區**
> ID = kn'(W/L)[(VGS-Vth)VDS - VDS²/2]
> = 2m × [1.2 × 0.5 - 0.5²/2] = 2m × [0.6 - 0.125] = 2m × 0.475 = **0.95 mA**
>
> **(b)** VOV = 1.2V
> VDS = 3V > VOV = 1.2V → **飽和區**
> ID = ½ × kn'(W/L) × VOV² = ½ × 2m × 1.2² = 1m × 1.44 = **1.44 mA**
>
> **(c)** VGS = 0.5V < Vth = 0.8V → **截止區**
> ID = **0 mA**

### 數值例題 5.2：由電流反推 VGS

> **題目**：NMOS 在飽和區，kn' = 200 μA/V²，W/L = 20，Vth = 0.6V，ID = 0.5mA。求 VGS。
>
> **解答**：
> ID = ½ × kn'(W/L) × (VGS - Vth)²
> 0.5m = ½ × 200μ × 20 × (VGS - 0.6)²
> 0.5m = 2m × (VGS - 0.6)²
> (VGS - 0.6)² = 0.25
> VGS - 0.6 = 0.5（取正值）
> VGS = 1.1V
>
> 驗證飽和區：需要 VDS ≥ VOV = 0.5V（這要看外部電路）

---

## 四、通道長度調變效應（Channel Length Modulation）

### 4.1 現象

理想情況下，飽和區的 ID 不隨 VDS 變化。但實際上：

**VDS 增大 → 夾斷點向源極移動 → 有效通道長度縮短 → ID 微增**

### 4.2 修正方程

$$I_D = \frac{1}{2} k_n' \frac{W}{L} (V_{GS} - V_{th})^2 (1 + \lambda V_{DS})$$

其中 **λ 是通道長度調變係數**（Channel Length Modulation Parameter）：
- 單位：V⁻¹
- 典型值：0.01 ~ 0.1 V⁻¹
- λ ∝ 1/L（通道越長，λ 越小，效應越弱）

### 4.3 輸出電阻 ro

$$r_o = \frac{1}{\lambda I_D} = \frac{V_A}{I_D}$$

其中 VA = 1/λ 稱為 **Early 電壓**（類比 BJT 的 Early 電壓）。

### 數值例題 5.3：通道長度調變

> **題目**：NMOS 在飽和區，ID = 0.5mA（忽略 λ 時），λ = 0.02 V⁻¹，VDS = 3V。
> 求考慮 λ 後的 ID 和 ro。
>
> **解答**：
> ID = 0.5m × (1 + 0.02 × 3) = 0.5m × 1.06 = 0.53 mA
> ro = 1/(λID) = 1/(0.02 × 0.53m) ≈ 94.3 kΩ
>
> 或用 VA = 1/λ = 50V：
> ro = VA/ID = 50/0.53m = 94.3 kΩ

---

## 五、MOSFET 偏壓設計

### 5.1 固定 VGS 偏壓

**電路**：閘極由 R1、R2 分壓決定 VGS，因為 IG = 0，所以分壓非常精確。

$$V_{GS} = V_{DD} \frac{R_2}{R_1 + R_2}$$

$$I_D = \frac{1}{2} k_n' \frac{W}{L} (V_{GS} - V_{th})^2$$

**缺點**：ID 對 Vth 的變化很敏感（Vth 受溫度和製程影響）。

### 5.2 含源極電阻 RS 的偏壓

**電路**：在源極加一個電阻 RS。

$$V_{GS} = V_G - I_D R_S$$

$$I_D = \frac{1}{2} k_n' \frac{W}{L} (V_G - I_D R_S - V_{th})^2$$

這是一個關於 ID 的二次方程，但更實用的方法是迭代或圖解。

**優點**：RS 提供負回授，穩定 Q 點。

### 數值例題 5.4：含 RS 的偏壓設計

> **題目**：NMOS，kn'(W/L) = 1 mA/V²，Vth = 1V，VDD = 10V。
> R1 = 3MΩ，R2 = 7MΩ，RD = 3kΩ，RS = 2kΩ。求 Q 點。
>
> **解答**：
> 步驟一：求 VG（因為 IG = 0，分壓精確）
> VG = 10 × 7M/(3M + 7M) = 7V
>
> 步驟二：假設飽和區
> VGS = VG - IDRS = 7 - 2000ID
> ID = ½ × 1m × (VGS - 1)²
> ID = 0.5m × (7 - 2000ID - 1)²
> ID = 0.5m × (6 - 2000ID)²
>
> 令 x = ID（mA）：
> x = 0.5 × (6 - 2x)²
> x = 0.5 × (36 - 24x + 4x²)
> x = 18 - 12x + 2x²
> 2x² - 13x + 18 = 0
> x = (13 ± √(169 - 144))/4 = (13 ± 5)/4
> x = 4.5 或 x = 2
>
> 取 x = 2 mA（另一個解會使 VGS < Vth，不合理）
>
> 步驟三：驗證
> VGS = 7 - 2 × 2 = 3V > Vth = 1V ✓
> VDS = VDD - ID(RD + RS) = 10 - 2m × 5k = 0V ← 有問題！
>
> 重新檢查：VDS = 10 - 2 × 5 = 0V，太低了！
> 改取另一個解試試看？x = 4.5 → VGS = 7 - 9 = -2V < Vth，不行。
>
> 回到 x = 2：VDS = 0V 代表 VD = VS + VDS = IDRS + 0 = 4V
> 但 VD = VDD - IDRD = 10 - 6 = 4V，VS = IDRS = 4V
> 所以 VDS = 0V → 進入線性區！
>
> 需要重新用線性區方程來解。在實際設計中，我們會調整電阻值讓 VDS 夠大。
>
> **教訓**：求完 ID 後一定要驗證操作區域！

### 數值例題 5.5：正確的偏壓設計

> **題目**：同上的 MOSFET，但改 RD = 2kΩ，RS = 1kΩ。重新求 Q 點。
>
> **解答**：
> VG = 7V（不變）
> VGS = 7 - 1000ID
> ID = 0.5m × (7 - 1000ID - 1)²  = 0.5m × (6 - 1000ID)²
>
> 令 x = ID (mA)：
> x = 0.5(6-x)² = 0.5(36 - 12x + x²)
> x = 18 - 6x + 0.5x²
> 0.5x² - 7x + 18 = 0  →  x² - 14x + 36 = 0
> x = (14 ± √(196-144))/2 = (14 ± √52)/2 = (14 ± 7.21)/2
> x = 10.6 或 x = 3.39
>
> 取 x = 3.39 mA：
> VGS = 7 - 3.39 = 3.61V > 1V ✓
> VOV = 3.61 - 1 = 2.61V
> VDS = 10 - 3.39m × 3k = 10 - 10.17 → 又不夠！
>
> 設計有問題。讓我們用更保守的設計——降低 VG。
>
> 若改 R1 = 7MΩ, R2 = 3MΩ → VG = 3V
> VGS = 3 - 1000ID
> ID = 0.5m(3-1000ID-1)² = 0.5m(2-1000ID)²
> x = 0.5(2-x)² = 0.5(4-4x+x²) = 2-2x+0.5x²
> 0.5x²-3x+2 = 0 → x²-6x+4 = 0
> x = (6±√20)/2 = (6±4.47)/2
> x = 5.24 或 x = 0.764
>
> 取 x = 0.764 mA：
> VGS = 3 - 0.764 = 2.236V，VOV = 1.236V
> VDS = 10 - 0.764 × 3 = 7.71V > VOV ✓ 在飽和區！
>
> **Q 點：(ID = 0.764 mA, VDS = 7.71V, VGS = 2.236V)**

---

## 六、電流鏡（Current Mirror）

### 6.1 基本電流鏡

電流鏡是 IC 設計中最重要的偏壓技術之一。

**原理**：兩個相同的 MOSFET（M1 和 M2），M1 的閘極和汲極短接（二極體連接），M2 的閘極接到 M1 的閘極。

因為 VGS1 = VGS2，且兩管相同（相同 kn', Vth）：

$$I_{D2} = I_{D1} \times \frac{(W/L)_2}{(W/L)_1}$$

如果 W/L 相同：ID2 = ID1（完美的電流複製）

### 6.2 電流鏡的精確度

非理想因素：
1. **通道長度調變**：VDS1 ≠ VDS2 → ID 略有差異
2. **鏡像比精度**：受製程匹配影響

**輸出電阻**：
$$R_{out} = r_{o2} = \frac{1}{\lambda I_{D2}}$$

### 6.3 Cascode 電流鏡

為了提高輸出電阻（更精確的電流源），使用 Cascode 結構：

$$R_{out} = g_{m3} r_{o3} r_{o2}$$

輸出電阻提高了 gm × ro 倍！

### 數值例題 5.6：基本電流鏡設計

> **題目**：NMOS 電流鏡，(W/L)₁ = 10，(W/L)₂ = 30，IREF = 100μA。
> kn' = 200 μA/V²，Vth = 0.5V，λ = 0.02V⁻¹。
> 求 ID2 和輸出電阻。
>
> **解答**：
> ID2 = IREF × (W/L)₂/(W/L)₁ = 100μ × 30/10 = **300 μA**
>
> ro = 1/(λ × ID2) = 1/(0.02 × 300μ) = **166.7 kΩ**
>
> 同時可以求 VGS：
> IREF = ½ × kn' × (W/L)₁ × (VGS - Vth)²
> 100μ = ½ × 200μ × 10 × (VGS - 0.5)²
> 100μ = 1000μ × (VGS - 0.5)²
> (VGS - 0.5)² = 0.1
> VGS = 0.5 + 0.316 = **0.816V**

---

## 七、MOSFET vs BJT 比較表

| 特性 | MOSFET | BJT |
|------|--------|-----|
| 驅動方式 | **電壓驅動**（IG ≈ 0） | 電流驅動（IB ≠ 0） |
| 輸入阻抗 | **極高**（閘極氧化層） | 有限（rπ） |
| 轉導 | gm = 2ID/VOV（較小） | gm = IC/VT（**較大**） |
| 輸出電阻 | 1/(λID)（較小） | VA/IC（較大） |
| 電流控制 | I ∝ (VGS-Vth)²（平方律） | I ∝ exp(VBE/VT)（指數律） |
| 雜訊 | 1/f 雜訊較大 | 1/f 雜訊較小 |
| 製程整合 | **容易**（CMOS） | 較困難 |
| 功率消耗 | **低**（數位電路） | 較高 |
| 速度 | 高（奈米製程） | 中~高 |
| 面積 | **小** | 較大 |
| 主要應用 | **數位 IC、大規模積體電路** | 類比、RF、功率電路 |
| 線性範圍 | 較寬（平方律較緩） | 較窄（指數律陡峭） |

### 轉導比較（關鍵差異！）

在相同電流 ID = IC 下：

$$g_m^{MOSFET} = \frac{2I_D}{V_{OV}} \quad vs \quad g_m^{BJT} = \frac{I_C}{V_T}$$

假設 VOV = 200mV，VT = 26mV：
- MOSFET：gm = 2ID/0.2 = 10ID
- BJT：gm = IC/0.026 = 38.5IC

**BJT 的 gm 大約是 MOSFET 的 4 倍**（在相同電流下）

這意味著 BJT 在相同功耗下能提供更高的增益。

### 數值例題 5.7：MOSFET 與 BJT 轉導比較

> **題目**：ID = IC = 1 mA，MOSFET 的 VOV = 0.2V，比較兩者的 gm。
>
> **解答**：
> MOSFET：gm = 2 × 1m / 0.2 = 10 mA/V = 10 mS
> BJT：gm = 1m / 0.026 = 38.5 mA/V = 38.5 mS
>
> **比率**：gm(BJT)/gm(MOSFET) = 38.5/10 = 3.85 倍

---

## 關鍵術語表

| 中文 | 英文 | 白話解釋 | 例子 |
|------|------|---------|------|
| 場效電晶體 | FET (Field-Effect Transistor) | 用電場（電壓）控制電流的電晶體 | MOSFET, JFET |
| 閘極 | Gate (G) | 控制端，用電壓控制通道 | 像水龍頭的旋鈕 |
| 汲極 | Drain (D) | 電流流入端（NMOS） | 像水管的入水口 |
| 源極 | Source (S) | 電流流出端（NMOS） | 像水管的出水口 |
| 閾值電壓 | Threshold Voltage (Vth) | 通道開始形成的最低閘極電壓 | NMOS 約 0.4~1.0V |
| 過驅電壓 | Overdrive Voltage (VOV) | VGS - Vth，超過閾值的部分 | 越大電流越大 |
| 反轉層 | Inversion Layer | 閘極電壓形成的導電通道 | 薄薄一層電子 |
| 線性區/三極管區 | Triode/Linear Region | VDS < VOV，像可變電阻 | 類比開關 |
| 飽和區 | Saturation Region | VDS ≥ VOV，電流主要由VGS控制 | **放大器工作區** |
| 通道長度調變 | Channel Length Modulation (λ) | VDS增大使有效通道變短 | 類似Early效應 |
| 寬長比 | W/L (Aspect Ratio) | 通道寬度/通道長度 | 設計參數 |
| 製程轉導參數 | Process Transconductance (kn') | μnCox，由製程決定 | 典型 100~500 μA/V² |
| 電流鏡 | Current Mirror | 複製參考電流的電路 | IC偏壓基本元件 |
| 體效應 | Body Effect | VSB ≠ 0 時 Vth 改變 | 堆疊MOSFET要注意 |

---

## 題型鑑別

| 看到什麼條件 | 用什麼方法 |
|-------------|-----------|
| 「判斷操作區域」 | 先看 VGS vs Vth，再看 VDS vs VOV |
| 「飽和區求電流」 | ID = ½kn'(W/L)(VGS-Vth)² |
| 「線性區求電流」 | ID = kn'(W/L)[(VGS-Vth)VDS - VDS²/2] |
| 「含 RS 的偏壓」 | VGS = VG - IDRS，代入飽和區方程解二次方程 |
| 「電流鏡」 | ID2/ID1 = (W/L)₂/(W/L)₁ |
| 「求 ro」 | ro = 1/(λID) |
| 「MOSFET 當開關」 | 線性區，RDS = 1/[kn'(W/L)(VGS-Vth)] |
| 「比較 MOSFET 和 BJT」 | MOSFET電壓驅動、gm較小；BJT電流驅動、gm較大 |

---

## ✅ 自我檢測

### 概念題

1. MOSFET 的閘極電流大約是多少？為什麼？
2. NMOS 在飽和區的條件是什麼？電流方程是什麼？
3. 什麼是通道長度調變效應？它對電路有什麼影響？
4. 電流鏡的基本原理是什麼？
5. MOSFET 和 BJT 最大的差異是什麼？

<details>
<summary>點擊查看答案</summary>

1. **IG ≈ 0。** 因為閘極和通道之間隔著一層 SiO₂ 絕緣層，直流電流無法通過。這是 MOSFET 相比 BJT 的一大優勢——不消耗輸入功率。

2. **條件：VGS > Vth 且 VDS ≥ VGS - Vth。**
   電流方程：ID = ½ kn'(W/L)(VGS - Vth)²（忽略λ時）。注意是平方關係。

3. **VDS 增大 → 夾斷點往源極移動 → 有效通道長度變短 → ID 微增。**
   影響：使飽和區的輸出特性不是完全水平的，等效為有限輸出電阻 ro = 1/(λID)。這限制了放大器增益。

4. **兩個 MOSFET 共享相同的 VGS，因此如果 W/L 相同，ID 就相同。** 一個管做成二極體連接（閘汲短接）提供參考電壓，另一個管複製這個電流。

5. **MOSFET 是電壓驅動（IG = 0），BJT 是電流驅動（IB ≠ 0）。** MOSFET 有無限大的輸入阻抗，容易整合，但在相同電流下 gm 較小。BJT 的 gm 較大，但需要輸入電流。

</details>

### 計算題

6. NMOS，kn' = 200μA/V²，W/L = 50，Vth = 0.5V，VGS = 1.5V，VDS = 2V。判斷區域並求 ID。
7. 同上，但 VDS = 0.3V。判斷區域並求 ID。
8. 電流鏡，(W/L)₁ = 5，(W/L)₂ = 15，IREF = 50μA。求 ID2。
9. NMOS，ID = 200μA，λ = 0.05V⁻¹。求 ro。
10. NMOS 在飽和區，kn'(W/L) = 4mA/V²，ID = 2mA。求 VGS（Vth = 0.7V）和 gm。

<details>
<summary>點擊查看答案</summary>

6. VOV = 1.5 - 0.5 = 1.0V
   VDS = 2V > VOV = 1.0V → 飽和區
   ID = ½ × 200μ × 50 × 1.0² = 5000μ × 0.5 = 5 mA

7. VOV = 1.0V，VDS = 0.3V < VOV → 線性區
   ID = 200μ × 50 × [1.0 × 0.3 - 0.3²/2] = 10m × [0.3 - 0.045] = 10m × 0.255 = 2.55 mA

8. ID2 = 50μ × 15/5 = 150 μA

9. ro = 1/(0.05 × 200μ) = 1/10μ = 100 kΩ

10. ID = ½ × kn'(W/L) × (VGS - Vth)²
    2m = ½ × 4m × (VGS - 0.7)²
    (VGS - 0.7)² = 1  →  VGS = 1.7V
    gm = 2ID/(VGS - Vth) = 2 × 2m / 1.0 = 4 mA/V = 4 mS

</details>

---

> **下一篇**：[electronics_06_MOSFET小信號分析](electronics_06_MOSFET小信號分析.md) — 學習 MOSFET 放大器的小信號分析！
