# 第二卷演算法教學藍圖

> **設計原則**：延續 Vol 1 的 AB 線融合技術。每個演算法都必須有情感耦合場景——技術突破 = 情感釋放的同步點。
> **與 Vol 1 的銜接**：Vol 1 的圖論萌芽（ch21 有向圖 + ch30 四條紅線 + ch56 分散式）在 Vol 2 正式展開為 Graph 系列。讀者在 Vol 2 ch100 看到 Graph 時應該覺得「有點熟」。
> **教學難度**：Vol 1 從線性（Array）到非線性（LL）再到效率（BS）。Vol 2 從結構化（Tree）到網絡（Graph）再到最佳化（DP）。

---

## 壹、九個演算法的 AB 線融合設計

### 1. Tree / BST（ch85, ch88, ch93-94）

**A 線（技術）**：記憶空間被具象化為一棵倒長的巨樹。根在頂部（最深層記憶），枝葉在下方（日常記憶）。BST 按情感強度排列——越痛苦的越深。

**B 線（情感）**：鋼琴師李曼筠的技能之樹被從根部砍斷。身體記得怎麼彈，但腦完全空白。

**同步點**：ch94 維倫找到被切斷的根節點 = 鋼琴師「根」的位置 = 「才華的起源」。修復根 = 不是恢復技能，是找到「為什麼開始彈琴」的那個記憶。

**米亞的比喻**：「一棵樹被砍了，但根還在地下。只要找到根，它會重新長。」

**教學策略**：
- ch85：Tree 結構初次亮相——深潛空間的視覺化。不教細節，只建立「巨樹」意象
- ch88：BST 分岔概念——「左子樹是做了的事，右子樹是沒做的事」= 人生的選擇
- ch93-94：Tree 的完整教學——通過鋼琴師案。根/葉/剪枝/重接

**AB 線品質預估**：★★★★。「根被砍但枝葉還在搖晃」是非常詩意的意象。

---

### 2. DFS（ch86-87, ch115）

**A 線（技術）**：深度優先搜尋——在記憶迷宮中不斷向更深層推進。碰到死路就回溯到上一個分岔點。

**B 線（情感）**：ch86-87 議員案——越深層的記憶越恐怖。第四層有「防禦體」= 由恐懼凝聚的巨大眼球。ch115 退役探員被困在動態迷宮。

**同步點**：ch87 維倫從死路回溯 = 面對恐懼後的退一步 = 「有時候前進的方式是先退回來」。

**米亞的比喻**：「走迷宮的規則：一直走到走不通。走不通就退一步。退一步不是失敗——是記住了一條不通的路。」

**教學策略**：
- ch86：DFS 概念——「一直往深處走」。用恐怖場景（記憶迷宮）驅動讀者好奇心
- ch87：回溯概念——碰到防禦體 = 死路 = 退回分岔點。恐懼 > 教學
- ch115：DFS 的變體——動態環境中的搜索（牆壁會重組）

**AB 線品質預估**：★★★。恐怖感很好，但 DFS 概念相對直觀，教學密度較低。

---

### 3. BFS（ch90, ch103, ch110）

**A 線（技術）**：廣度優先搜尋——不是深入一條路，而是同一層面上橫向展開。像漣漪一樣一圈一圈擴散。

**B 線（情感）**：ch103 消失的母親——她的記憶裡所有「親子連結邊」被切斷。孩子還在記憶裡，但通向他們的路全斷了。

**同步點**：ch103-104 維倫用 BFS 在母親記憶中一圈圈擴散搜索 = 「一個母親在自己的腦海裡找不到自己的孩子」。每擴一圈 = 更多的空白 = 更大的心碎。

**米亞的比喻**：「如果 DFS 是挖井——一直往下。BFS 是撒網——往四面八方展開。有時候你要找的東西不在最深處，而是散落在周圍。」

**教學策略**：
- ch90：BFS 首次出現——議員案的橫向掃描。概念建立
- ch103：BFS 的情感高峰——母親案。「漣漪」意象 = 母愛的擴散方式
- ch110：BFS 的反面應用——病毒從圓心以 BFS 模式擴散 = 恐怖

**AB 線品質預估**：★★★★。ch103 有潛力成為 Vol 2 前半的催淚場景。

**三次 BFS 的情感遞進**：
- ch90：中性（工具使用）
- ch103：溫暖/心碎（母愛）
- ch110：恐怖（病毒）
- 讀者學到：同一個演算法可以救人也可以傷人 = 「工具是中性的，意圖決定一切」

---

### 4. Graph / Connected Components（ch100, ch104-105, ch109, ch120-121, ch125）

**A 線（技術）**：節點與邊。連通分量。一張完整的圖碎裂成互不相連的島嶼。

**B 線（情感）**：整座城市的記憶網絡在崩解。從 47 個家庭到 23,000 人。

**同步點**：ch121 米亞將碎裂的網絡投射在月台牆壁上——123 個互不相連的島嶼 = 「一座城市正在分裂成碎片」= 讀者看到的不只是圖論概念，而是文明的崩潰。

**米亞的比喻**：「想像新台北是一張巨大的網。每個人是一個點，每段記憶連結是一條線。有人在剪線。剪到最後——三百萬人住在同一座城市，但沒有任何人記得彼此。」

**教學策略**：
- ch100：Graph 正式引入——三方勢力關係圖（政治 = 圖結構）
- ch104-105：節點/邊的直觀理解——母親案的「記憶孤島」
- ch109：Connected Components 概念——汙染分布圖的同心圓
- ch120-121：CC 的大規模應用——城市碎裂為 123 個島嶼
- ch125：從碎片重建——記憶考古

**AB 線品質預估**：★★★★★。Graph 是 Vol 2 最核心的演算法——它不只是工具，是全卷的隱喻（人與人的連結 = 邊。邊斷了 = 孤獨）。

---

### 5. Topological Sort（ch126-127, ch142）

**A 線（技術）**：有依賴關係的事件必須按正確順序排列。拓撲排序找出「這件事必須在那件事之前發生」的序列。

**B 線（情感）**：篡改歷史的順序——先殺周明哲，再刪遊行，再清目擊者，最後覆蓋全城。

**同步點**：ch127 拓撲排序揭示「最先被篡改的是周明哲的死亡紀錄」= 一切的起點不是遊行被遺忘，而是一個人的死被偽造 = 讀者的脊背發涼。

**米亞的比喻**：「你不能在蓋房子之前打地基。拓撲排序就是找出：先做什麼，後做什麼，才能讓這棟謊言大樓站穩。」

**教學策略**：
- ch126：概念引入——碎片的依賴關係。「催淚彈在衝突升級之後」= 時間順序
- ch127：核心教學——還原篡改執行順序。邏輯 > 情感
- ch142：回收——鸚鵡計畫文件中的完整依賴鏈

**AB 線品質預估**：★★★。TopSort 偏邏輯，情感耦合度較低。但 ch127 的「死亡紀錄是起點」有衝擊力。

---

### 6. Union-Find（ch131-132）

**A 線（技術）**：歸併所有篡改事件到同一個集合，追溯至唯一根節點。

**B 線（情感）**：所有的陰謀、篡改、斷聯——全部指向一個人。邱韻如。

**同步點**：ch132 「W = 韻 = 邱韻如」的揭露瞬間。Union-Find 的根 = 織網者 = 語青的母親。技術揭露 = 情感炸彈。

**米亞的比喻**：「如果你追蹤每一條線索到最後，它們全部收束到同一個點——那個點就是根。不管你從哪裡開始追，最終都會到達同一個人。」

**教學策略**：
- ch131：歸併操作——一個一個把篡改事件合併到同一集合
- ch132：Find 操作——找到根。揭露瞬間

**AB 線品質預估**：★★★★。揭露的瞬間 = AB 線同步。但 Union-Find 本身只用了 2 章，教學密度較低。建議在精修時增加「歸併過程」的視覺化描寫——米亞在月台牆上投射合併動畫。

---

### 7. Dijkstra（ch137-139）

**A 線（技術）**：在加權圖中找到最低風險路徑。每條邊的權重 = 被偵測的概率。

**B 線（情感）**：維倫潛入記憶銀行——七層安全防護。這不是教學場景，是動作場景。

**同步點**：ch139 第五層意外——觸發了十年前遊行的完整錄像。最安全的路徑繞不過最重要的真相。= 「最安全的路徑不一定通向最重要的真相」。

**米亞的比喻**：「每條路都有代價。Dijkstra 找的不是最短的路——是代價最低的路。但有時候，最重要的東西偏偏在代價最高的那條路上。」

**教學策略**：
- ch137：建模——將安全網絡轉化為加權圖
- ch138：算法執行——沿最低風險路徑潛入
- ch139：即時調整——觸發警報後重新計算

**AB 線品質預估**：★★★。動作場景的節奏 > 教學深度。但 ch139 的哲學意義加分。

---

### 8. DP / Knapsack（ch147-148, ch155）

**A 線（技術）**：0/1 背包問題——有限容量下選擇最優子集。每段記憶有重量（神經容量）和價值（對人格的重要性）。

**B 線（情感）**：嚴柏翰必須選擇放棄一部分記憶。十年的探員生涯 vs 被覆蓋的真實人生。

**同步點**：ch149 嚴柏翰的選擇——放棄破案紀錄、榮譽、同事情誼。只保留三樣：友誼、方法論、茉莉花。= 「什麼值得記住」= 背包問題的人生版。

**米亞的比喻**：「你的大腦是一個背包。只能裝這麼多。每一段記憶都有重量。你必須決定：帶走什麼，留下什麼。」

**教學策略**：
- ch147：問題定義——容量超限 34%。必須做選擇
- ch148：逐一評估——每段記憶的「重量」和「價值」。嚴柏翰的手在發抖
- ch155：DP 的變體——在碎片化記憶中找最優重建序列

**AB 線品質預估**：★★★★★。**Vol 2 最佳教學場景**。「什麼值得記住」= 全卷最觸動靈魂的問題。讀者會跟嚴柏翰一起做選擇——如果是你，你會保留什麼？

**與 Vol 1 ch77 的呼應**：
- ch77 維倫選擇犧牲自己的記憶 = 放棄所有
- ch149 嚴柏翰選擇保留三樣 = 精選
- 兩者都是「選擇 > 擁有」的變體

---

### 9. Backtracking（ch115-117, ch150-151）

**A 線（技術）**：系統性嘗試所有路徑。碰壁就回退。記錄已探索狀態。

**B 線（情感）**：ch115-117 退役探員的動態迷宮（恐怖感）。ch150-151 嚴柏翰的覆蓋記憶逐層剝離（心碎感）。

**同步點**：ch151 第一段恢復的記憶——嚴柏翰看到 24 歲的自己不是探員，是研究生。Backtracking「回到起點」= 他回到了真正的自己。

**米亞的比喻**：「Backtracking 就是：走錯了，退回來，試另一條。但每一條錯路不是浪費——你知道了它不通。」

**教學策略**：
- ch115-117：Backtracking 在恐怖場景中（動態迷宮）= 概念建立
- ch150-151：Backtracking 在情感場景中（記憶恢復）= 情感耦合

**AB 線品質預估**：★★★★。ch151 的「回到起點」= 很好的同步設計。

---

## 貳、教學遞進設計

### 讀者的演算法理解曲線（Vol 2）

```
ch85：    「記憶像一棵樹。有根有葉。」          → 結構
ch86-87：  「走迷宮。一直走，碰壁回退。」        → 深度搜索
ch90：    「不深入。展開。像漣漪。」             → 廣度搜索
ch100：   「三方勢力。點和線。」                 → 圖
ch109：   「碎裂的網。孤島。」                   → 連通分量
ch126：   「順序。先做什麼後做什麼。」            → 拓撲排序
ch131：   「所有線索最終歸併到同一個人。」        → Union-Find
ch137：   「代價最低的路。」                     → Dijkstra
ch147：   「背包只有這麼大。選擇帶走什麼。」     → DP
ch150：   「走錯了退回來。但知道了哪條不通。」    → Backtracking
```

**遞進邏輯**：結構（Tree）→ 搜索策略（DFS/BFS）→ 網絡思維（Graph/CC）→ 順序與溯源（TopSort/UF）→ 最佳化與決策（Dijkstra/DP）→ 探索與回退（Backtracking）。

### 與 Vol 1 的教學銜接

| Vol 1 概念 | Vol 2 升級 |
|-----------|-----------|
| Array（線性排列）| Tree（階層結構）|
| Sliding Window（掃描）| BFS（多維擴散）|
| HashMap（比對）| Graph（網絡關係）|
| Stack（層次剝開）| Backtracking（系統性剝開）|
| Linked List（環形）| Connected Components（碎裂）|
| Binary Search（效率搜索）| Dijkstra（最優路徑）|
| 綜合運用 | DP（最優化決策）|

---

## 參、AB 線融合品質排名（預測）

| 排名 | 演算法 | 章 | 理由 |
|------|--------|---|------|
| 1 | DP(Knapsack) | ch147-149 | 「什麼值得記住」= 全卷最佳。嚴柏翰的三樣東西 |
| 2 | Graph/CC | ch104+ch121 | 記憶孤島 + 城市碎裂 = 全卷核心隱喻 |
| 3 | BFS | ch103 | 母親找不到孩子 = 漣漪式的心碎 |
| 4 | Tree/BST | ch93-94 | 根被砍但枝葉搖晃 = 詩意 |
| 5 | Backtracking | ch150-151 | 回到真正的自己 = 同步設計好 |

---

## 肆、米亞在 Vol 2 的演算法翻譯功能

| 演算法 | 米亞的比喻 | 品質預估 |
|--------|-----------|---------|
| Tree | 「根在最深處，葉子在外面」| ★★★ 直觀但普通 |
| DFS | 「走到走不通就退一步」| ★★★ 簡單有效 |
| BFS | 「撒網。漣漪。」| ★★★★ 漣漪意象好 |
| Graph/CC | 「人是點，記憶是線，線斷了就變孤島」| ★★★★★ 全卷最佳 |
| TopSort | 「先打地基再蓋房子」| ★★★ 建築比喻 |
| Union-Find | 「所有線索收束到同一個點」| ★★★★ 偵探感 |
| Dijkstra | 「代價最低的路」| ★★★ 簡潔 |
| DP | 「背包只有這麼大」| ★★★★★ 人生比喻 |
| Backtracking | 「走錯了不是浪費」| ★★★★ 勵志感 |

**待加強**：Tree 和 TopSort 的比喻可以更生動。建議精修時改進。
