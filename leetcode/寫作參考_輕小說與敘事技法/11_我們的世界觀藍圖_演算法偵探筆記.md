# 《演算法偵探筆記》——世界觀藍圖與層次佈局

> 這不是「分析」。這是我們的世界，分成六層。
> 我們一次只揭開一層。讀者和主角一起探索。
> 到最後一章回頭看第一章，會發現一切都是伏筆。

---

## 世界的六層結構

```
┌──────────────────────────────────────────────────┐
│ Layer 6：計算的邊界                                │
│ → NP 問題、可計算性、人工智慧的極限               │
│ → 「有些問題沒有完美答案」= 人生的隱喻            │
│ → 最終 boss：一個無法被解決的問題                  │
├──────────────────────────────────────────────────┤
│ Layer 5：業界真實面貌                              │
│ → 系統設計、分散式系統、面試的真正意義             │
│ → Google / FAANG 的面試不是考演算法，是考思維方式  │
│ → 學姊的過去：她為什麼離開業界回來讀書？          │
├──────────────────────────────────────────────────┤
│ Layer 4：入侵者的真實動機                          │
│ → DP、賽局理論、最佳化                            │
│ → 入侵者不是在破壞——他在建構某種東西              │
│ → 反轉：入侵者可能是「好人」                      │
├──────────────────────────────────────────────────┤
│ Layer 3：隱藏的圖網路                              │
│ → Graph、DFS/BFS、Tree、最短路徑                  │
│ → 資料庫裡藏的不只是亂序——是一張人際關係網        │
│ → 有人在用數據畫出「誰和誰有關」                  │
├──────────────────────────────────────────────────┤
│ Layer 2：被打亂的伺服器                            │
│ → Binary Search、Hash Map、Two Pointers、排序     │
│ → 表面案件：資料被打亂、有重複、有規律            │
│ → 第一次「世界比想的大」：打亂方式是半完成的 Heap  │
├──────────────────────────────────────────────────┤
│ Layer 1：校園日常                                  │
│ → 基礎概念、變數、迴圈、函數                      │
│ → 林凱只是個普通資工系學生                        │
│ → 世界看起來很小很安全                            │
└──────────────────────────────────────────────────┘
```

---

## 前 15 章的逐章佈局

### 第 1 章「凌晨三點的來電」（已完成 = 第一夜上半）

**Layer 1 → Layer 2 的過渡**

- 林凱在睡覺。學姊打電話。系計中被入侵。
- 世界從「宿舍」→「伺服器室」
- 介紹四個角色。
- **第一個問題**：入侵是什麼時候發生的？

**鉤子：** 凌晨三點被叫去伺服器室。學姊說話像被 token 計費的。

**教了什麼：** 還沒教。只是建立世界和角色。

---

### 第 2 章「在時間的海裡撈一根針」（已完成 = 第一夜中段）

**Layer 2：Binary Search**

- 86,400 行日誌。分界點在某處。
- 阿翔要一行行看。林凱提出「看中間」。
- 17 步找到入侵時間。

**鉤子：** 「入侵時間：01:23:47。」第一個問題解決了。但還有兩個。

**教了什麼：** Binary Search。O(log n)。「排序賦予資料結構」。

**伏筆（讀者不會注意到的）：** 入侵時間 01:23:47 這個數字本身可能有意義（後面揭露）。

---

### 第 3 章「偵探的筆記本」（已完成 = 第一夜後段）

**Layer 2：Hash Map + Two Pointers**

- 找重複資料：Hash Map，一次遍歷，兩秒。
- 比對原始和竄改版：Two Pointers。
- 沒有資料被刪除。只有打亂+插入。

**鉤子：** 「這像是有人在測試什麼。」為什麼入侵者不刪資料？

**教了什麼：** Hash Map 的 O(1)。Two Pointers 的 O(n)。排序的投資回報。

**伏筆：** 重複資料的間距是 512, 256, 128, 64...（等比數列）

---

### 第 4 章「混亂中的秩序」（已完成 = 第一夜結尾）

**Layer 2 → Layer 3 的過渡**

- 被打亂的方式不是隨機——是半完成的 Heap Sort
- 重複資料的位置形成 Binary Search Tree
- 被篡改的 course 欄位存的是其他學號 = **指標**

**鉤子：** 「有人在資料庫裡藏了一張隱藏的圖。」

**反轉：** 破壞是障眼法。真正的目的是那張藏在數據裡的圖。

**教了什麼：** Heap Sort。BST。排序演算法的選擇本身就是線索。

---

### 第 5 章「三小時」（待寫）

**日常篇/喘息章——冰菓模式**

- 回宿舍。天亮了。三人在食堂吃早餐。
- 阿翔抱怨沒睡覺。林凱在想那張圖。
- **輕鬆的日常對話**中不經意教了 Stack 和 Queue：
  - 食堂排隊 = Queue（先進先出）
  - 阿翔疊盤子 = Stack（後進先出）
  - 「你知道為什麼食堂永遠在排隊嗎？因為它是單通道 Queue。如果開兩條線......」

**鉤子（輕鬆的）：** 學姊發了一條訊息：「今晚九點。帶你們的筆電。」

**教了什麼：** Stack 和 Queue。日常類比。

---

### 第 6 章「拆網」（待寫）

**Layer 3：Graph 基礎**

- 晚上九點回到伺服器室。學姊把隱藏的指標關係畫出來。
- 螢幕上出現了一張**圖（Graph）**：節點是學號，邊是篡改的 course 欄位
- 學姊解釋：「點和線。點是人，線是關係。這叫做圖。」

**世界怎麼變大的：**
- 之前：「一維」的資料（排序、搜尋）
- 現在：**「多維」的關係網絡。數據不只有大小，還有連結。**

**反轉：** 這張圖裡的「人」不只是學生——有教授、助教。某些不該有交集的人之間有線。

**鉤子：** 「而且這張圖裡......有一個環。」

**教了什麼：** Graph 的基本概念。節點和邊。有向圖 vs 無向圖。

---

### 第 7 章「環」（待寫）

**Layer 3：DFS / Cycle Detection**

- 學姊帶著林凱用 DFS 走這張圖。
- 走著走著——回到了起點。**環（Cycle）。**
- 「在圖論裡，環代表一種循環。在現實裡——」
- 「有人在說謊。」

**教了什麼：** DFS。Cycle Detection。遞迴的概念。

**反轉：** 環裡的人包括吳教授。「等等......教授也在裡面？」

**鉤子：** 吳教授突然不接電話了。

---

### 第 8 章「吳教授」（待寫）

**角色反轉章**

- 去吳教授辦公室。門開著。人不在。
- 桌上的筆電開著，上面有一個程式正在跑——看起來像是某種自動化腳本
- 學姊看了一眼：「這是......BFS。他在搜尋什麼。」
- 吳教授不是受害者。他可能知道些什麼。甚至——他可能就是入侵者。

**反轉的反轉（夢幻島式）：**
讀者以為的權力結構：

```
之前：吳教授（委託人）→ 學姊+林凱+阿翔（偵探）→ 入侵者（敵人）
現在：吳教授（？？？）→ 學姊（她知道多少？）→ 林凱（唯一單純的人？）
```

**教了什麼：** BFS。BFS vs DFS 的差異。

---

### 第 9 章「訪客」（待寫）

**新角色登場——世界再次擴大（海賊王式）**

- 一個人出現在系館——穿著 Google 的帽T。
- 自我介紹：「陳維安。你們可以叫我 Vincent。Google Taipei SRE。吳教授的前學生。」
- 他是來幫忙的？還是來監視的？
- Vincent 看到螢幕上的圖：「這張圖......你們知道這是什麼嗎？」
- 「這不只是選課資料庫的圖。這是你們學校的**內網拓撲**。」

**世界怎麼變大的：**
- 之前：一個被入侵的選課系統
- 現在：**選課系統只是表面。底下是整個學校的網路架構。入侵者不是在玩資料庫——他在摸整個內網。**

**鉤子：** Vincent 的眼神變了。「這種手法......我在 Google 看過。」

**教了什麼：** 網路圖的概念。拓撲結構。現實中的 Graph。

---

### 第 10 章「業界」（待寫）

**Layer 3 → Layer 4 的過渡**

- Vincent 解釋：這種入侵手法在業界叫做「APT」——Advanced Persistent Threat
- 「不是 script kiddie。這是專業的。」
- Vincent 開始用**最短路徑演算法**追蹤入侵者的行動路線
- Dijkstra's Algorithm 的教學，但包裝在「追蹤入侵者在網路中的移動」裡

**反轉：** 追蹤結果顯示入侵者最後一個節點是——校長室的伺服器。

**鉤子：** 「誰能碰到校長室的伺服器？」

**教了什麼：** Dijkstra。最短路徑。權重圖。

---

### 第 11 章「內鬼」（待寫）

**夢幻島式的「內通者」展開**

- 線索越查越不對。有些資訊只有系上內部的人才能取得。
- Vincent 暗示：「入侵者可能不是外人。」
- 林凱開始懷疑：是學姊嗎？是教授嗎？是 Vincent 自己嗎？

**資訊不對稱地圖（讀者此刻的狀態）：**
```
林凱知道的：案件表面、基礎演算法、懷疑對象
林凱不知道的：學姊的過去、吳教授在做什麼、Vincent 的真實目的
學姊知道的：比任何人都多（但她在隱瞞什麼？）
Vincent 知道的：業界的手法、Google 的標準——但他為什麼來得這麼快？
阿翔知道的：最少。但他的「暴力美學」偶爾能碰到真相。
```

**教了什麼：** 信任模型。如何在不完整資訊下做決策。（這本身就是演算法思維）

---

### 第 12 章「樹」（待寫）

**Layer 4：Tree + 遞迴**

- 林凱重新整理所有線索，畫成了一棵**決策樹**
- 每個分支是「如果入侵者是 X，那 Y 應該成立」
- 學姊看到他的樹：「不錯。但你少了一個分支。」
- 「什麼分支？」
- 「如果入侵者......是兩個人呢？」

**反轉：** 不是一個入侵者。是兩個人合作。決策樹需要重新長。

**教了什麼：** Tree。遞迴。Decision Tree 的概念。

---

### 第 13 章「回溯」（待寫）

**Layer 4：Backtracking**

- 之前的推理走進了死胡同。
- 學姊教了一個方法：**回溯法。**
- 「走到死路就退回上一步。試另一條路。」
- 在推理的過程中，林凱教了讀者 Backtracking：
  - 嘗試假設 A → 矛盾 → 退回
  - 嘗試假設 B → 矛盾 → 退回
  - 嘗試假設 C → 沒有矛盾 → 繼續走

**鉤子：** 假設 C 的結果指向一個人——但那個人三年前已經畢業了。

**教了什麼：** Backtracking。遞迴的實際應用。

---

### 第 14 章「動態規劃」（待寫）

**Layer 4 → Layer 5 的預示**

- Vincent 坐在白板前，畫了一張表格。
- 「你們一直在用暴力法試所有可能。但有些子問題是重複的。」
- **DP 的教學**：不是從案件出發，而是從 Vincent 回憶 Google 面試的經歷：
  - 「我面試 Google 的時候被問了一道 DP 題。當時完全不會。」
  - 「後來我花了六個月理解 DP 的本質。」
  - 「DP 的本質不是『動態規劃』這個名字。是：**不要重複解已經解過的問題。**」

**反轉：** Vincent 的 Google 面試故事裡，面試官問的那道題......和這次入侵的手法有一個驚人的相似之處。

**鉤子：** 「那個面試官的名字......你還記得嗎？」Vincent 沉默了三秒。「記得。」

**教了什麼：** DP 的核心概念。Memoization。子問題分解。

---

### 第 15 章「真相的碎片」（待寫）

**多重揭露——世界再次炸開**

三條線索同時匯聚：
1. 入侵者的手法和 Vincent 面試時遇到的題目相似
2. 吳教授的自動化腳本不是在搜尋——他在**加密**某些東西
3. 隱藏的圖網路不只是人際關係——它是一個**分散式系統的架構圖**

**世界怎麼變大的：**
```
之前：一個被入侵的選課系統
Layer 2：入侵有規律、有方法
Layer 3：資料庫裡藏了一張圖
Layer 4：圖指向的是更大的網路架構
Layer 5 預示：這可能和業界、和 Google、和某個更大的計畫有關
```

**鉤子：** 學姊站起來。她的表情是林凱從沒見過的——不是冷靜，不是分析。是**恐懼**。

「我知道這是誰了。」

她閉上眼睛。

「是我的老師。」

---

## 待揭露的大祕密（讀者在第 15 章還不知道的）

```
- 學姊為什麼離開 Google 回來讀書（Layer 5）
- 吳教授在加密的東西是什麼（Layer 4-5）
- Vincent 和面試官的關係（Layer 5）
- 入侵者的真正目的不是破壞而是保護（Layer 4 反轉）
- 「演算法」在這個世界裡不只是工具——它是一種思維方式，
  而這種思維方式可以改變人的命運（Layer 6）
- 林凱最終要面對的不是入侵者，而是一個「無法被解決的問題」（Layer 6）
```

---

## 角色的真實身份（逐步揭露）

| 角色 | 表面身份 | 真實層次 | 揭露時機 |
|------|----------|----------|----------|
| 林凱 | 普通資工系學生 | 有直覺天賦的人，會成長為真正的工程師 | 全程 |
| 學姊 | ICPC 金牌、冷靜分析者 | 離開 Google 是因為某個事件、某個人 | Ch.15 開始揭露 |
| 阿翔 | 暴力美學家、搞笑擔當 | 他的「暴力解」有時候反而是對的 | 中期高光 |
| 吳教授 | 半夜叫學生的嚴厲教授 | 他在保護某個東西，不是在攻擊 | Ch.8-10 |
| Vincent | Google SRE、學長 | 他來不是偶然——他在追蹤同一條線索 | Ch.9-14 |
| 入侵者 | 未知 | 學姊的前老師，有自己的理由 | Ch.15 揭露身份 |

---

## 這個世界的「味道」

```
不是奇幻。不是異世界。

是你讀資工系時會經歷的一切：
- 凌晨三點還在 debug
- 食堂排隊時想到 Queue
- 看到學姊寫程式時的那種「差距感」
- 面試被刷掉時的挫折
- 第一次理解遞迴時的「啊！」

但在這個日常之下，藏著更大的東西：
- 演算法不只是面試工具——它是理解世界的方式
- 排序不只是把數字排好——排序是賦予資料結構
- Graph 不只是資料結構——它是人際關係的地圖
- DP 不只是面試題——它是「不要重複犯相同錯誤」的人生哲學

讀者一邊跟著案件走，一邊不知不覺學到了一切。
回頭看的時候會發現：
「原來第一章食堂排隊的場景，就是在教 Queue。」
「原來入侵者選 Heap Sort 不是隨便選的——因為他在受限環境下操作。」

每個細節都有意義。就像詭秘之主。就像海賊王。
```
