# VLSI 教學講義 第七章：記憶體設計

> **適用對象**：零基礎入門，電機/電子系大學部至研究所
> **重要度**：SRAM 是 TSMC/MTK/聯發科/Intel 面試**必考題**，6T SRAM 單元是核心中的核心

---

## 🔰 本章基礎觀念（零基礎必讀）

### 記憶體為什麼重要？

現代處理器晶片中，**超過 50% 的面積**是記憶體（主要是 SRAM cache）。

| 類型 | 速度 | 密度 | 用途 |
|------|------|------|------|
| SRAM | **最快** | 低（6T/cell） | CPU Cache（L1/L2/L3） |
| DRAM | 中等 | 中（1T1C/cell） | 主記憶體 |
| Flash | 慢 | **最高** | 儲存裝置（SSD） |

> **一句話記憶**：SRAM 快但大，DRAM 小但要刷新，Flash 最小但最慢。

---

## 一、SRAM（靜態隨機存取記憶體）

### 1.1 6T SRAM 單元結構

這是**最重要的記憶體電路**，務必完全理解。

```
                 VDD                    VDD
                  │                      │
             ┌────┤                 ┌────┤
             │  ┌─┴─┐              │  ┌─┴─┐
             │  │ P1│              │  │ P2│
             │  └─┬─┘              │  └─┬─┘
             │    │                │    │
             │    ├── Q    Q_bar ──┤    │
             │    │    ╲    ╱      │    │
             │  ┌─┴─┐  ╲╱╱       │  ┌─┴─┐
             │  │ N1│  ╱╲╲       │  │ N2│
             │  └─┬─┘ ╱    ╲     │  └─┬─┘
             │    │   ╱      ╲    │    │
             └────┤  ╱        ╲   └────┤
                  │ ╱          ╲       │
                 GND            ╲     GND
                                 ╲
    BL ─────┤          ├──── BL_bar
             │  ┌─┴─┐  │
        WL ──┤──┤ N3│  │
             │  └───┘  │
             │         │  ┌─┴─┐
             │    WL ──┤──┤ N4│
             │         │  └───┘
```

更清楚的版本：

```
        BL                    BL_bar (BLB)
         │                      │
       ┌─┴─┐                ┌─┴─┐
  WL ──┤ N3│(存取)     WL ──┤ N4│(存取)
       └─┬─┘                └─┬─┘
         │                      │
         ├── Q ──────────── Q_bar ──┤
         │                          │
    ┌────┤                     ┌────┤
  ┌─┴─┐┌─┴─┐              ┌─┴─┐┌─┴─┐
  │ P1││ N1│              │ N2││ P2│
  └─┬─┘└─┬─┘              └─┬─┘└─┬─┘
    │    │                    │    │
   VDD  GND                 GND  VDD
```

**6 個電晶體**：
- **P1 + N1**：反相器 1（INV1），輸入 Q_bar，輸出 Q
- **P2 + N2**：反相器 2（INV2），輸入 Q，輸出 Q_bar
- **N3**：存取電晶體（Access Transistor），連接 Q 到 BL
- **N4**：存取電晶體，連接 Q_bar 到 BL_bar

兩個反相器交叉耦合 → **雙穩態（Bistable）**，儲存一個位元。

### 1.2 讀操作

**步驟**：

```
1. 預充：BL = BL_bar = VDD
2. 字元線（WL）開啟 → N3, N4 導通
3. 假設 Q = 0, Q_bar = 1：
   - BL 透過 N3 → Q（= 0）→ BL 開始放電
   - BL_bar 透過 N4 → Q_bar（= 1）→ BL_bar 維持 VDD
4. 感測放大器偵測 BL 和 BL_bar 的電壓差 ΔV
5. 放大 ΔV → 讀出資料
```

```
       BL(預充=VDD)           BL_bar(預充=VDD)
         │                      │
       ┌─┴─┐                ┌─┴─┐
  WL=1─┤ N3│(ON)       WL=1─┤ N4│(ON)
       └─┬─┘                └─┬─┘
         │                      │
    Q=0 ─┤                 Q_bar=1─┤
         ↓                      │
    BL 放電（下降）           BL_bar 維持 VDD
```

**讀取電壓差**：

```
ΔV = VDD × C_BL × exp(-t / (R_access × C_BL)) ... （簡化）

或更直觀地：ΔV 取決於存取時間和 BL 電容
```

### 1.3 讀穩定性問題

**關鍵問題**：讀操作會干擾儲存的資料！

當 Q = 0 且 WL 開啟，BL（= VDD）透過 N3 對 Q 充電，Q 的電壓會稍微升高：

```
           N3(存取)      N1(下拉)
BL(VDD) ──┤████├──Q──┤████├──GND
```

Q 點的電壓上升到：

```
V_Q = VDD × R_N1 / (R_N1 + R_N3)
```

如果 V_Q 超過 INV2 的開關閾值 → **資料被翻轉（Read Disturb）**！

**解決方案**：使 **N1 比 N3 強**（即 N1 寬度 > N3 寬度）

### 1.4 蝴蝶曲線（Butterfly Curve）與 SNM

**SNM（Static Noise Margin，靜態雜訊邊限）** 衡量 SRAM 的讀穩定性。

**方法**：畫出兩個反相器的 VTC，旋轉其中一個疊加：

```
Q_bar
 ^
VDD┤    ╲           ╱
   │     ╲ INV2   ╱ INV1
   │      ╲      ╱
   │   ┌───╲──╱───┐
   │   │    ╲╱    │← 最大正方形
   │   │    ╱╲    │   邊長 = SNM
   │   └──╱───╲──┘
   │     ╱      ╲
   │    ╱        ╲
 0 ┤───╱──────────╲──
   └──┬──┬──┬──┬──┬──→ Q
      0           VDD
```

**SNM = 在兩個環之間能放入的最大正方形的邊長**

| SNM 值 | 穩定性 |
|--------|--------|
| SNM > 0.3V（VDD=1V） | 良好 |
| SNM ≈ 0.2V | 邊界 |
| SNM < 0.1V | 不穩定，可能讀錯 |

### 1.5 寫操作

**步驟**：

```
1. 將要寫的值放到 BL 和 BL_bar：
   - 寫 0：BL = 0, BL_bar = VDD
   - 寫 1：BL = VDD, BL_bar = 0
2. WL 開啟 → N3, N4 導通
3. 外部驅動器（比 SRAM 單元強得多）強制翻轉 Q 和 Q_bar
```

**寫的關鍵**：
- BL 驅動器必須能**壓過 PMOS 上拉**
- 如果 PMOS 太強 → 寫入失敗

### 1.6 寫邊限（Write Margin）

**寫邊限** = 能成功寫入的最大雜訊電壓。

要成功寫入，存取電晶體 N3 必須能將 Q（原本 = 1）拉低到 INV2 的開關閾值以下。

需要 **N3 比 P1 強**（即 N3 的驅動力 > P1 的驅動力）。

### 1.7 Cell Ratio (CR) 與 Pull-up Ratio (PR)

這兩個比值決定了 SRAM 的穩定性和可寫入性：

```
┌────────────────────────────────────────────────┐
│  Cell Ratio (CR) = (W/L)_N1 / (W/L)_N3        │
│                  = 下拉電晶體 / 存取電晶體      │
│  → CR 越大，讀穩定性越好（SNM 越大）            │
│  → 典型值：CR ≥ 1.2~2                          │
│                                                │
│  Pull-up Ratio (PR) = (W/L)_P1 / (W/L)_N3     │
│                     = 上拉電晶體 / 存取電晶體    │
│  → PR 越小，寫入越容易                          │
│  → 典型值：PR ≤ 1                              │
└────────────────────────────────────────────────┘
```

**設計衝突**：
- 讀穩定性要求 N1 強（CR 大）→ 但這使單元面積增大
- 寫入能力要求 P1 弱（PR 小）→ 但這使保持狀態的穩定性降低
- **6T SRAM 的設計就是在這兩者之間取得平衡**

### 1.8 存取時間分析

SRAM 的存取時間由以下步驟組成：

```
t_access = t_decode + t_wordline + t_bitline + t_sense_amp + t_output

其中：
- t_decode：位址解碼器延遲
- t_wordline：字元線延遲（RC 延遲）
- t_bitline：位元線放電/充電時間
- t_sense_amp：感測放大器響應時間
- t_output：輸出緩衝延遲
```

**位元線延遲**（通常是最大的）：

```
t_BL ∝ C_BL / I_cell

其中 C_BL = N_rows × C_access（N_rows 是同一列的行數）
```

> **行數越多 → C_BL 越大 → 速度越慢**。所以大容量 SRAM 需要分成多個 Bank。

---

## 二、DRAM（動態隨機存取記憶體）

### 2.1 1T1C 單元

```
     BL
      │
    ┌─┴─┐
WL──┤ N1│(存取電晶體)
    └─┬─┘
      │
     ═╪═ Cs（儲存電容，通常 20~30 fF）
      │
    Vplate（通常 = VDD/2）
```

**只有 1 個電晶體 + 1 個電容 → 密度極高**

### 2.2 讀操作

1. 預充 BL 到 VDD/2
2. WL 開啟 → Cs 和 C_BL 電荷分享

```
如果 Cs 儲存 VDD（邏輯 1）：
  V_BL = (Cs × VDD + C_BL × VDD/2) / (Cs + C_BL)
       = VDD/2 + ΔV

  ΔV = (Cs / (Cs + C_BL)) × VDD/2
```

**典型 ΔV 只有 100~200 mV**（因為 C_BL >> Cs）→ 需要高靈敏度感測放大器。

### 2.3 感測放大器（Sense Amplifier）

```
        VDD
         │
    ┌────┤────────┤────┐
    │  ┌─┴─┐    ┌─┴─┐  │
    │  │ P1│    │ P2│  │
    │  └─┬─┘    └─┬─┘  │
    │    │          │    │
 BL ────┤    交叉    ├──── BL_bar
    │    │   耦合    │    │
    │  ┌─┴─┐    ┌─┴─┐  │
    │  │ N1│    │ N2│  │
    │  └─┬─┘    └─┬─┘  │
    └────┤────────┤────┘
         │
        SE(感測致能)
```

**工作原理**：利用正回饋將微小的 ΔV 放大到完整的 VDD 和 0。

### 2.4 更新（Refresh）

DRAM 的電容會漏電 → 資料會慢慢消失 → 需要**定期讀取並重新寫入**。

```
更新週期：通常 64 ms 內必須更新所有行
更新頻率 = 總行數 / 64ms
```

> **這就是「動態」的含義**：需要持續更新才能保持資料。
> SRAM 不需要更新（靜態），但面積大。

### 2.5 DRAM vs SRAM 比較

| 特性 | SRAM | DRAM |
|------|------|------|
| 單元結構 | 6T | 1T1C |
| 面積（相對） | 6x | 1x |
| 速度 | **快**（< 1ns） | 慢（~10ns） |
| 需要更新？ | 不需要 | **需要（每 64ms）** |
| 功耗 | 低（無更新） | 中（更新耗電） |
| 用途 | CPU Cache | 主記憶體 |
| 成本/bit | 高 | **低** |

---

## 三、ROM / Flash Memory

### 3.1 ROM（唯讀記憶體）

| 類型 | 特點 |
|------|------|
| Mask ROM | 製造時寫入，不可更改 |
| PROM | 一次性可程式（燒斷保險絲） |
| EPROM | 紫外線可抹除 |
| EEPROM | 電氣可抹除 |

### 3.2 Flash Memory

**基本結構**：浮閘電晶體（Floating Gate Transistor）

```
     控制閘 (Control Gate)
          │
    ══════╪══════  ← 層間介電質
    ┌─────┴─────┐
    │ 浮閘 (FG)  │  ← 被絕緣層包圍，電子可以被「困住」
    └─────┬─────┘
    ══════╪══════  ← 隧道氧化層
    ┌─────┴─────┐
  n+│           │n+
  (S)           (D)
    └───────────┘
     P-type 基板
```

**原理**：
- 浮閘中有電子 → Vt 升高 → 正常讀取電壓下不導通 → 儲存「0」
- 浮閘中無電子 → Vt 正常 → 導通 → 儲存「1」

**寫入（Program）**：高電壓使電子穿隧進入浮閘（FN Tunneling）
**抹除（Erase）**：反向電壓使電子穿隧離開浮閘

**Flash 類型**：

| 類型 | 特點 | 應用 |
|------|------|------|
| NOR Flash | 隨機讀取快 | 程式碼儲存（Firmware） |
| NAND Flash | 循序讀寫快、密度高 | SSD、USB 隨身碟 |

**多位元技術**：

| 技術 | 位元/cell | Vt 位準 | 可靠性 |
|------|----------|---------|--------|
| SLC | 1 | 2 | **最好** |
| MLC | 2 | 4 | 好 |
| TLC | 3 | 8 | 中等 |
| QLC | 4 | 16 | 較差 |

---

## 四、新興記憶體

### 4.1 MRAM（磁阻式隨機存取記憶體）

- 利用**磁性隧道接面（MTJ）**的電阻差來儲存資料
- **STT-MRAM**（自旋轉移矩）是主流
- 優點：非揮發、速度接近 SRAM、無限寫入次數
- 應用：嵌入式快取、IoT 低功耗記憶體

### 4.2 ReRAM / RRAM（電阻式隨機存取記憶體）

- 利用**金屬氧化物的電阻切換**
- 形成/斷裂導電細絲（Conductive Filament）
- 優點：結構簡單、可 3D 堆疊
- 應用：儲存級記憶體（Storage Class Memory）

### 4.3 PCRAM（相變化隨機存取記憶體）

- 利用材料的**晶態/非晶態**切換
- 晶態：低電阻（邏輯 1）
- 非晶態：高電阻（邏輯 0）
- Intel 的 3D XPoint 技術即基於此
- 應用：持久記憶體（Persistent Memory）

### 4.4 新興記憶體比較

| 特性 | SRAM | DRAM | Flash | MRAM | ReRAM | PCRAM |
|------|------|------|-------|------|-------|-------|
| 揮發性 | 揮發 | 揮發 | 非揮發 | **非揮發** | **非揮發** | **非揮發** |
| 速度 | < 1ns | ~10ns | ~μs | ~10ns | ~10ns | ~100ns |
| 寫入次數 | 無限 | 無限 | ~10⁵ | **無限** | ~10⁶ | ~10⁸ |
| 面積 | 大 | 中 | 小 | 中 | 小 | 中 |
| 成熟度 | 量產 | 量產 | 量產 | 量產中 | 研發中 | 量產中 |

---

## 五、關鍵術語表

| 英文 | 中文 | 說明 |
|------|------|------|
| SRAM | 靜態隨機存取記憶體 | 6T 單元，快但面積大 |
| DRAM | 動態隨機存取記憶體 | 1T1C，需要更新 |
| 6T Cell | 六電晶體單元 | SRAM 基本單元 |
| Word Line (WL) | 字元線 | 選擇行 |
| Bit Line (BL) | 位元線 | 讀寫資料的線 |
| Sense Amplifier | 感測放大器 | 放大微小電壓差 |
| SNM (Static Noise Margin) | 靜態雜訊邊限 | 蝴蝶曲線中的正方形 |
| Butterfly Curve | 蝴蝶曲線 | 兩個反相器 VTC 疊合 |
| Cell Ratio (CR) | 單元比 | N_pull-down / N_access |
| Pull-up Ratio (PR) | 上拉比 | P_pull-up / N_access |
| Read Disturb | 讀干擾 | 讀操作可能翻轉資料 |
| Write Margin | 寫邊限 | 成功寫入的雜訊容忍度 |
| Refresh | 更新 | DRAM 重新寫入資料 |
| Floating Gate | 浮閘 | Flash 的儲存機制 |
| FN Tunneling | FN 穿隧 | 電子穿越氧化層 |
| MRAM | 磁阻式記憶體 | 利用磁性儲存 |
| ReRAM | 電阻式記憶體 | 利用電阻切換 |
| PCRAM | 相變化記憶體 | 利用晶態/非晶態 |
| Precharge | 預充 | 讀取前將 BL 充到 VDD |
| Bitline Capacitance | 位元線電容 | 影響讀取速度 |

---

## 六、數值例題

### 例題 1：SRAM 讀穩定性分析

**題目**：6T SRAM，N1(下拉) W/L = 2，N3(存取) W/L = 1，P1(上拉) W/L = 1。
VDD = 1.0V，Vtn = 0.3V。
當 Q = 0 時讀取，估算 Q 點的電壓上升（假設 N1 和 N3 都在線性區近似為電阻）。

**解答**：

N3 的等效電阻 ∝ 1/(W/L) = 1/1 = 1（相對值）
N1 的等效電阻 ∝ 1/(W/L) = 1/2 = 0.5（相對值）

Q 點電壓（電阻分壓）：

```
V_Q = VDD × R_N1 / (R_N1 + R_N3)
    = 1.0 × 0.5 / (0.5 + 1.0)
    = 1.0 × 0.5 / 1.5
    = 0.333V
```

**CR = (W/L)_N1 / (W/L)_N3 = 2/1 = 2**

V_Q = 0.333V > Vtn = 0.3V → **Q 點電壓已經超過 NMOS 閾值，有翻轉風險！**

如果 CR = 3（N1 W/L = 3）：
```
V_Q = VDD × (1/3) / (1/3 + 1) = 1.0 × 0.333/1.333 = 0.25V < 0.3V ✓
```

**答：V_Q = 0.333V，CR = 2 時有讀穩定性風險，建議 CR ≥ 3**

---

### 例題 2：DRAM 讀取電壓差

**題目**：1T1C DRAM，儲存電容 Cs = 25 fF，位元線電容 C_BL = 250 fF。
預充到 VDD/2 = 0.5V。儲存值 = VDD = 1.0V。求讀取時的 ΔV。

**解答**：

```
V_BL = (Cs × VDD + C_BL × VDD/2) / (Cs + C_BL)
     = (25f × 1.0 + 250f × 0.5) / (25f + 250f)
     = (25 + 125) / 275
     = 150/275 × 10⁻¹⁵/10⁻¹⁵
     = 0.5455V

ΔV = V_BL - VDD/2 = 0.5455 - 0.5 = 0.0455V = 45.5 mV
```

或直接用簡化公式：
```
ΔV = (Cs / (Cs + C_BL)) × VDD/2
   = (25/(25+250)) × 0.5
   = (25/275) × 0.5
   = 0.0909 × 0.5
   = 0.04545V ≈ 45.5 mV
```

**答：ΔV ≈ 45.5 mV**

> 只有 45.5 mV 的電壓差！這就是為什麼 DRAM 需要高靈敏度的感測放大器。
> 如果 Cs/C_BL 比值更小，ΔV 會更小 → 更難讀取。

---

### 例題 3：SRAM Cell Ratio 設計

**題目**：要求 SNM ≥ 0.25V（VDD = 1.0V），根據經驗公式 SNM ≈ VDD × (CR - 1)/(2CR + 2)。
求最小 CR。

**解答**：

```
0.25 ≥ 1.0 × (CR - 1)/(2CR + 2)

0.25 × (2CR + 2) ≥ CR - 1
0.5CR + 0.5 ≥ CR - 1
0.5 + 1 ≥ CR - 0.5CR
1.5 ≥ 0.5CR
CR ≤ 3 ??
```

等等，這給出上限而非下限。讓我用另一個方向：

SNM 隨 CR 增大而增大（因為下拉更強）。

重新整理：
```
SNM = VDD × (CR - 1) / (2CR + 2)

令 SNM = 0.25, VDD = 1.0：
0.25 = (CR - 1) / (2CR + 2)
0.25(2CR + 2) = CR - 1
0.5CR + 0.5 = CR - 1
1.5 = 0.5CR
CR = 3
```

驗證：
```
CR = 3: SNM = (3-1)/(2×3+2) = 2/8 = 0.25V ✓
CR = 2: SNM = (2-1)/(2×2+2) = 1/6 = 0.167V < 0.25V ✗
CR = 4: SNM = (4-1)/(2×4+2) = 3/10 = 0.3V > 0.25V ✓
```

**答：最小 CR = 3**

> 注意：實際 SNM 的計算更複雜（需要考慮 PMOS 等），此處用簡化經驗公式。

---

### 例題 4：SRAM 陣列存取時間

**題目**：一個 256×256 SRAM 陣列，每個存取電晶體的擴散電容 = 0.5 fF。
位元線金屬線電容 = 0.2 fF/μm，每行高度 = 1 μm。
感測放大器需要 100 mV 電壓差。
SRAM 單元的放電電流 I_cell = 20 μA。
(a) 求位元線總電容
(b) 求位元線放電時間

**解答**：

(a) 位元線總電容：
```
C_access = 256 × 0.5 fF = 128 fF（所有存取電晶體）
C_wire = 256 × 1μm × 0.2 fF/μm = 51.2 fF

C_BL = C_access + C_wire = 128 + 51.2 = 179.2 fF ≈ 180 fF
```

(b) 放電時間（達到 100 mV 電壓差）：
```
ΔV = I_cell × t / C_BL

t = ΔV × C_BL / I_cell
  = 100×10⁻³ × 180×10⁻¹⁵ / (20×10⁻⁶)
  = 18×10⁻¹⁵ / 20×10⁻⁶
  = 0.9×10⁻⁹
  = 0.9 ns
```

**答：(a) C_BL ≈ 180 fF (b) t ≈ 0.9 ns**

> 0.9 ns 只是位元線部分的延遲。加上解碼器、感測放大器和輸出，
> 總存取時間大約在 1~3 ns 左右（現代 SRAM）。

---

### 例題 5：Flash 多位元 Vt 分佈

**題目**：一個 TLC（3 bit/cell）Flash，VDD = 3.3V，8 個 Vt 位準均勻分佈在 0.5V ~ 3.3V。
(a) 每個位準之間的間距
(b) 如果 Vt 的變異（3σ）= 0.1V，位準間的安全邊限

**解答**：

(a) 8 個位準在 0.5V ~ 3.3V：
```
間距 = (3.3 - 0.5) / (8 - 1) = 2.8 / 7 = 0.4V
```

(b) 安全邊限 = 間距 - 2 × 3σ = 0.4 - 2 × 0.1 = 0.2V

```
如果變異增大到 3σ = 0.15V：
安全邊限 = 0.4 - 2 × 0.15 = 0.1V（很勉強！）

如果變異到 3σ = 0.2V：
安全邊限 = 0.4 - 0.4 = 0V（不可行！）
```

**答：(a) 0.4V (b) 安全邊限 = 0.2V**

> 這就是為什麼 QLC（4 bit/cell，16 位準）對 Vt 控制要求極為嚴苛。

---

## 七、題型鑑別表

| 題目特徵 | 題型 | 方法 |
|---------|------|------|
| 6T SRAM 讀穩定性 | SNM 分析 | CR、蝴蝶曲線 |
| Q 點電壓升高 | 讀干擾分析 | 電阻分壓 R_N1/(R_N1+R_N3) |
| 寫入能否成功 | 寫邊限分析 | N_access vs P_pullup |
| DRAM 讀取 ΔV | 電荷分享 | Cs/(Cs+C_BL) × VDD/2 |
| SRAM 存取時間 | 速度分析 | C_BL, I_cell, ΔV |
| Flash Vt 控制 | 可靠性分析 | 間距 vs 變異 |
| 記憶體比較 | 概念題 | SRAM/DRAM/Flash 特性 |

---

## ✅ 自我檢測

### Q1：6T SRAM 為什麼叫「6T」？每個電晶體的角色是什麼？

<details>
<summary>點擊展開答案</summary>

6T = 6 Transistors（6 個電晶體）

| 電晶體 | 類型 | 角色 |
|--------|------|------|
| P1 | PMOS | 上拉（Pull-up），INV1 的一部分 |
| N1 | NMOS | 下拉（Pull-down），INV1 的一部分 |
| P2 | PMOS | 上拉，INV2 的一部分 |
| N2 | NMOS | 下拉，INV2 的一部分 |
| N3 | NMOS | 存取電晶體（Access），連接 Q 到 BL |
| N4 | NMOS | 存取電晶體，連接 Q_bar 到 BL_bar |

P1+N1 組成 INV1（輸入 Q_bar，輸出 Q），P2+N2 組成 INV2（輸入 Q，輸出 Q_bar）。
兩個反相器交叉耦合形成雙穩態，用來儲存 1 bit 資料。
N3 和 N4 是存取電晶體，由字元線（WL）控制，決定何時可以讀寫。
</details>

### Q2：為什麼 SRAM 的 Cell Ratio (CR) 要大於 1？

<details>
<summary>點擊展開答案</summary>

CR = (W/L)_pull-down / (W/L)_access

在讀操作中，存取電晶體（N3）和下拉電晶體（N1）形成分壓器：

```
BL(VDD) → N3 → Q → N1 → GND
```

如果 CR = 1（N1 和 N3 一樣大），Q 點電壓 = VDD/2 = 0.5V（VDD=1V），遠超過 NMOS 閾值（~0.3V），會導致 INV2 翻轉 → 資料被破壞。

CR > 1 意味著 N1 比 N3 強（電阻更低），Q 點電壓被更有力地拉向 GND。
例如 CR = 3：V_Q ≈ VDD × (1/3)/(1/3 + 1) = 0.25V < Vtn → 安全。

所以 CR 要夠大以確保讀穩定性，典型值為 1.5~3。
</details>

### Q3：DRAM 為什麼需要更新（Refresh）？SRAM 為什麼不需要？

<details>
<summary>點擊展開答案</summary>

**DRAM**：
- 資料儲存在電容（Cs）上
- 電容有漏電（接面漏電、次閾值漏電等）
- 電荷會慢慢流失 → 電壓下降
- 如果不更新，幾毫秒內資料就會消失
- 所以需要每 64ms 對每一行做一次「讀取+重寫」（Refresh）

**SRAM**：
- 資料儲存在交叉耦合的反相器中
- 只要有電源供應，正回饋會持續維持穩態
- Q = 1 時：INV2 輸出 0 → INV1 輸入 0 → INV1 輸出 1 = Q → 穩定
- 不需要外部更新（但斷電就會遺失 → 仍是揮發性記憶體）
</details>

### Q4：什麼是感測放大器？為什麼 DRAM 比 SRAM 更需要它？

<details>
<summary>點擊展開答案</summary>

**感測放大器（Sense Amplifier）** 是一種高增益的差動放大器，能將微小的電壓差放大到完整的邏輯位準。

**為什麼 DRAM 更需要**：
- DRAM 的 ΔV 非常小（~50-200 mV），因為 Cs << C_BL
- 需要感測放大器才能可靠地判斷 0 還是 1

**SRAM 也用感測放大器**：
- 為了加快速度（不需要等 BL 完全放電到 0）
- 但 SRAM 的 ΔV 通常比 DRAM 大（因為 6T 單元驅動力較強）

感測放大器的典型結構是交叉耦合的反相器對（Cross-Coupled Inverter Pair），利用正回饋將 ΔV 放大。
</details>

---

> **下一章預告**：第八章將學習**低功耗設計與先進技術**——多閾值電壓、電源閘控、
> DVFS，以及 PVT 變異、可測試性設計（DFT）和 SoC 設計流程。
