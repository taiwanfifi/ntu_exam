# 電磁學教學講義 01：向量分析與座標系

---

## 🔰 **本章基礎觀念（零基礎必讀）**

### 為什麼電磁學需要向量？

想像你站在操場上，風吹過來了。你的朋友問你：「風大嗎？」你說：「風速每秒 5 公尺。」這只告訴他**多大**——這叫**純量（Scalar）**。

但如果你想放風箏，你還需要知道「風往哪裡吹」。每秒 5 公尺**朝北**——這就是**向量（Vector）**：同時描述**大小**與**方向**。

電磁學中幾乎所有的物理量都有方向性：
- **電場 E**：指向正電荷被推走的方向
- **磁場 B**：決定指南針偏轉的方向
- **電流密度 J**：電荷流動的方向

所以，不懂向量，就無法處理電磁學。本章就是幫你把這個工具磨利。

---

## 一、三種座標系（Coordinate Systems）

### 1.1 為什麼需要不同的座標系？

想像你要描述一個甜甜圈的形狀。用直角座標 (x, y, z) 寫起來很痛苦，但如果換一種「圓形的尺」就簡單很多。不同的座標系就像不同形狀的尺——選對尺，計算事半功倍。

| 座標系 | 適用幾何 | 日常例子 |
|--------|---------|---------|
| 直角座標 | 方方正正的結構 | 房間、書架、螢幕像素 |
| 圓柱座標 | 圓柱形結構 | 水管、電纜、罐頭 |
| 球座標 | 球形結構 | 地球、天線輻射、星球 |

---

### 1.2 直角座標系（Cartesian Coordinate System）

最直覺的座標系。空間中任何一點 P 用三個數描述：

$$P = (x, y, z)$$

三個單位向量 $\hat{x}$、$\hat{y}$、$\hat{z}$（有些課本寫 $\hat{a}_x$、$\hat{a}_y$、$\hat{a}_z$），彼此**正交**（互相垂直）且遵守右手定則。

**位置向量（Position Vector）：**

$$\vec{r} = x\hat{x} + y\hat{y} + z\hat{z}$$

**微分長度元素：**

$$d\vec{l} = dx\,\hat{x} + dy\,\hat{y} + dz\,\hat{z}$$

**微分體積元素：**

$$dv = dx\,dy\,dz$$

**微分面積元素：**（各面法向量不同）
- $d\vec{S}_x = dy\,dz\,\hat{x}$
- $d\vec{S}_y = dx\,dz\,\hat{y}$
- $d\vec{S}_z = dx\,dy\,\hat{z}$

---

### 1.3 圓柱座標系（Cylindrical Coordinate System）

用「離軸多遠、轉了多少角度、高度多少」來描述位置：

$$P = (\rho, \phi, z)$$

- $\rho$（rho）：點到 z 軸的距離，$\rho \geq 0$
- $\phi$（phi）：從正 x 軸逆時針旋轉的角度，$0 \leq \phi < 2\pi$
- $z$：與直角座標的 z 相同

**單位向量：** $\hat{\rho}$、$\hat{\phi}$、$\hat{z}$

> ⚠️ 注意：$\hat{\rho}$ 和 $\hat{\phi}$ 的方向會**隨位置改變**！在不同的 $\phi$ 角度，它們指向不同方向。這是初學者最常搞混的地方。

**微分長度元素：**

$$d\vec{l} = d\rho\,\hat{\rho} + \rho\,d\phi\,\hat{\phi} + dz\,\hat{z}$$

> 白話：$\rho\,d\phi$ 是「半徑乘以角度」= 弧長。想想扇形的弧長公式 $s = r\theta$。

**微分面積元素：**
- $d\vec{S}_\rho = \rho\,d\phi\,dz\,\hat{\rho}$（圓柱側面）
- $d\vec{S}_\phi = d\rho\,dz\,\hat{\phi}$
- $d\vec{S}_z = \rho\,d\rho\,d\phi\,\hat{z}$（圓柱端面）

**微分體積元素：**

$$dv = \rho\,d\rho\,d\phi\,dz$$

---

### 1.4 球座標系（Spherical Coordinate System）

用「離原點多遠、天頂角、方位角」來描述位置：

$$P = (r, \theta, \phi)$$

- $r$：點到原點的距離，$r \geq 0$
- $\theta$（theta）：從正 z 軸量下來的角度（天頂角），$0 \leq \theta \leq \pi$
- $\phi$（phi）：在 xy 平面上從正 x 軸逆時針旋轉的角度，$0 \leq \phi < 2\pi$

**單位向量：** $\hat{r}$、$\hat{\theta}$、$\hat{\phi}$

> ⚠️ 三個單位向量的方向都**隨位置改變**！

**微分長度元素：**

$$d\vec{l} = dr\,\hat{r} + r\,d\theta\,\hat{\theta} + r\sin\theta\,d\phi\,\hat{\phi}$$

> 白話：$r\,d\theta$ 是沿著經線的弧長，$r\sin\theta\,d\phi$ 是沿著緯線的弧長（緯線半徑是 $r\sin\theta$）。

**微分面積元素：**
- $d\vec{S}_r = r^2\sin\theta\,d\theta\,d\phi\,\hat{r}$（球面）
- $d\vec{S}_\theta = r\sin\theta\,dr\,d\phi\,\hat{\theta}$
- $d\vec{S}_\phi = r\,dr\,d\theta\,\hat{\phi}$

**微分體積元素：**

$$dv = r^2\sin\theta\,dr\,d\theta\,d\phi$$

---

## 二、座標轉換公式

### 2.1 圓柱座標 ↔ 直角座標

**圓柱 → 直角：**

$$x = \rho\cos\phi, \quad y = \rho\sin\phi, \quad z = z$$

**直角 → 圓柱：**

$$\rho = \sqrt{x^2 + y^2}, \quad \phi = \tan^{-1}(y/x), \quad z = z$$

### 2.2 球座標 ↔ 直角座標

**球 → 直角：**

$$x = r\sin\theta\cos\phi, \quad y = r\sin\theta\sin\phi, \quad z = r\cos\theta$$

**直角 → 球：**

$$r = \sqrt{x^2 + y^2 + z^2}, \quad \theta = \cos^{-1}\!\left(\frac{z}{r}\right), \quad \phi = \tan^{-1}(y/x)$$

### 2.3 單位向量轉換矩陣

**直角 → 圓柱的單位向量：**

$$\begin{pmatrix} \hat{\rho} \\ \hat{\phi} \\ \hat{z} \end{pmatrix} = \begin{pmatrix} \cos\phi & \sin\phi & 0 \\ -\sin\phi & \cos\phi & 0 \\ 0 & 0 & 1 \end{pmatrix} \begin{pmatrix} \hat{x} \\ \hat{y} \\ \hat{z} \end{pmatrix}$$

---

### 📝 例題 1：座標轉換

**題目：** 將直角座標點 P = (1, √3, 4) 轉換為圓柱座標和球座標。

**解：**

**(a) 轉為圓柱座標：**

$$\rho = \sqrt{1^2 + (\sqrt{3})^2} = \sqrt{1 + 3} = 2$$

$$\phi = \tan^{-1}\!\left(\frac{\sqrt{3}}{1}\right) = \tan^{-1}(\sqrt{3}) = 60° = \frac{\pi}{3}$$

$$z = 4$$

答：$P = (2,\;\pi/3,\;4)$ in cylindrical

**(b) 轉為球座標：**

$$r = \sqrt{1^2 + (\sqrt{3})^2 + 4^2} = \sqrt{1 + 3 + 16} = \sqrt{20} = 2\sqrt{5}$$

$$\theta = \cos^{-1}\!\left(\frac{4}{2\sqrt{5}}\right) = \cos^{-1}\!\left(\frac{2}{\sqrt{5}}\right) \approx 26.57°$$

$$\phi = \frac{\pi}{3} \quad \text{（和圓柱座標的 } \phi \text{ 一樣）}$$

答：$P = (2\sqrt{5},\;26.57°,\;60°)$ in spherical

---

## 三、向量運算

### 3.1 梯度（Gradient）∇f

**白話解釋：** 你站在一座山上，梯度告訴你「往哪個方向走，高度上升最快」，而且它的大小就是「那個方向上的上升率」。

梯度將一個**純量場**（如溫度、電位）變成一個**向量場**。

**三種座標系的公式：**

直角座標：

$$\nabla f = \frac{\partial f}{\partial x}\hat{x} + \frac{\partial f}{\partial y}\hat{y} + \frac{\partial f}{\partial z}\hat{z}$$

圓柱座標：

$$\nabla f = \frac{\partial f}{\partial \rho}\hat{\rho} + \frac{1}{\rho}\frac{\partial f}{\partial \phi}\hat{\phi} + \frac{\partial f}{\partial z}\hat{z}$$

球座標：

$$\nabla f = \frac{\partial f}{\partial r}\hat{r} + \frac{1}{r}\frac{\partial f}{\partial \theta}\hat{\theta} + \frac{1}{r\sin\theta}\frac{\partial f}{\partial \phi}\hat{\phi}$$

### 📝 例題 2：梯度計算

**題目：** 電位分佈為 $V = 2x^2y + xz$，求電場 $\vec{E} = -\nabla V$ 在點 (1, 2, 3) 的值。

**解：**

$$\frac{\partial V}{\partial x} = 4xy + z$$

$$\frac{\partial V}{\partial y} = 2x^2$$

$$\frac{\partial V}{\partial z} = x$$

$$\nabla V = (4xy + z)\hat{x} + 2x^2\hat{y} + x\hat{z}$$

代入 (1, 2, 3)：

$$\nabla V\big|_{(1,2,3)} = (4 \cdot 1 \cdot 2 + 3)\hat{x} + 2(1)^2\hat{y} + 1\hat{z} = 11\hat{x} + 2\hat{y} + \hat{z}$$

$$\vec{E} = -\nabla V = -11\hat{x} - 2\hat{y} - \hat{z} \quad \text{(V/m)}$$

$$|\vec{E}| = \sqrt{121 + 4 + 1} = \sqrt{126} \approx 11.22 \text{ V/m}$$

---

### 3.2 散度（Divergence）∇·F

**白話解釋：** 想像一個泳池，散度告訴你某個點「水是在噴出來（源，散度 > 0），還是被吸走（匯，散度 < 0），還是只是路過（散度 = 0）」。

散度將一個**向量場**變成一個**純量場**。

**三種座標系的公式：**

直角座標：

$$\nabla \cdot \vec{F} = \frac{\partial F_x}{\partial x} + \frac{\partial F_y}{\partial y} + \frac{\partial F_z}{\partial z}$$

圓柱座標：

$$\nabla \cdot \vec{F} = \frac{1}{\rho}\frac{\partial(\rho F_\rho)}{\partial \rho} + \frac{1}{\rho}\frac{\partial F_\phi}{\partial \phi} + \frac{\partial F_z}{\partial z}$$

球座標：

$$\nabla \cdot \vec{F} = \frac{1}{r^2}\frac{\partial(r^2 F_r)}{\partial r} + \frac{1}{r\sin\theta}\frac{\partial(\sin\theta\, F_\theta)}{\partial \theta} + \frac{1}{r\sin\theta}\frac{\partial F_\phi}{\partial \phi}$$

### 📝 例題 3：散度計算

**題目：** 向量場 $\vec{F} = \rho^2\hat{\rho} + \sin\phi\,\hat{\phi} + 3z\hat{z}$（圓柱座標），求 $\nabla \cdot \vec{F}$。

**解：**

$$\nabla \cdot \vec{F} = \frac{1}{\rho}\frac{\partial(\rho \cdot \rho^2)}{\partial \rho} + \frac{1}{\rho}\frac{\partial(\sin\phi)}{\partial \phi} + \frac{\partial(3z)}{\partial z}$$

第一項：$\frac{1}{\rho}\frac{\partial(\rho^3)}{\partial \rho} = \frac{1}{\rho} \cdot 3\rho^2 = 3\rho$

第二項：$\frac{1}{\rho}\cos\phi$

第三項：$3$

$$\nabla \cdot \vec{F} = 3\rho + \frac{\cos\phi}{\rho} + 3$$

---

### 3.3 旋度（Curl）∇×F

**白話解釋：** 把一個小小的風車放在水流裡。如果風車會轉，就代表那裡有旋度。旋轉越快，旋度越大。旋度的**方向**就是風車轉軸的方向（用右手定則判斷）。

旋度將一個**向量場**變成另一個**向量場**。

**直角座標的公式：**

$$\nabla \times \vec{F} = \begin{vmatrix} \hat{x} & \hat{y} & \hat{z} \\ \frac{\partial}{\partial x} & \frac{\partial}{\partial y} & \frac{\partial}{\partial z} \\ F_x & F_y & F_z \end{vmatrix}$$

展開：

$$\nabla \times \vec{F} = \left(\frac{\partial F_z}{\partial y} - \frac{\partial F_y}{\partial z}\right)\hat{x} + \left(\frac{\partial F_x}{\partial z} - \frac{\partial F_z}{\partial x}\right)\hat{y} + \left(\frac{\partial F_y}{\partial x} - \frac{\partial F_x}{\partial y}\right)\hat{z}$$

**圓柱座標的公式：**

$$\nabla \times \vec{F} = \left(\frac{1}{\rho}\frac{\partial F_z}{\partial \phi} - \frac{\partial F_\phi}{\partial z}\right)\hat{\rho} + \left(\frac{\partial F_\rho}{\partial z} - \frac{\partial F_z}{\partial \rho}\right)\hat{\phi} + \frac{1}{\rho}\left(\frac{\partial(\rho F_\phi)}{\partial \rho} - \frac{\partial F_\rho}{\partial \phi}\right)\hat{z}$$

### 📝 例題 4：旋度計算

**題目：** 向量場 $\vec{F} = xy\hat{x} + 2yz\hat{y} + 3xz\hat{z}$，求 $\nabla \times \vec{F}$ 在點 (1, 1, 1)。

**解：**

$F_x = xy$，$F_y = 2yz$，$F_z = 3xz$

$$(\nabla \times \vec{F})_x = \frac{\partial(3xz)}{\partial y} - \frac{\partial(2yz)}{\partial z} = 0 - 2y = -2y$$

$$(\nabla \times \vec{F})_y = \frac{\partial(xy)}{\partial z} - \frac{\partial(3xz)}{\partial x} = 0 - 3z = -3z$$

$$(\nabla \times \vec{F})_z = \frac{\partial(2yz)}{\partial x} - \frac{\partial(xy)}{\partial y} = 0 - x = -x$$

$$\nabla \times \vec{F} = -2y\hat{x} - 3z\hat{y} - x\hat{z}$$

代入 (1, 1, 1)：

$$\nabla \times \vec{F}\big|_{(1,1,1)} = -2\hat{x} - 3\hat{y} - \hat{z}$$

大小：$|\nabla \times \vec{F}| = \sqrt{4 + 9 + 1} = \sqrt{14} \approx 3.74$

---

## 四、兩大定理

### 4.1 散度定理（Divergence Theorem）

$$\oint_S \vec{F} \cdot d\vec{S} = \int_V (\nabla \cdot \vec{F})\,dv$$

**白話解釋：** 一個向量場通過一個**封閉曲面**的「淨流出量」，等於這個封閉曲面**內部所有源減去所有匯**的總和。

想像一個房間（封閉體積）：流出門窗的空氣總量 = 房間裡所有空氣清淨機吹出的空氣 - 所有抽風機吸走的空氣。

**用途：** 將面積分轉換為體積分（或反過來），大幅簡化計算。

### 📝 例題 5：散度定理驗證

**題目：** 向量場 $\vec{F} = x\hat{x} + y\hat{y} + z\hat{z}$，封閉曲面為邊長 1 的正方體（從原點到 (1,1,1)）。驗證散度定理。

**解：**

**左邊（面積分）：** 正方體有 6 個面。

- x = 1 面：$\vec{F} \cdot \hat{x}\,dy\,dz = 1 \cdot dy\,dz$，積分 = 1
- x = 0 面：$\vec{F} \cdot (-\hat{x})\,dy\,dz = 0$，積分 = 0
- y = 1 面：積分 = 1
- y = 0 面：積分 = 0
- z = 1 面：積分 = 1
- z = 0 面：積分 = 0

左邊合計 = 1 + 0 + 1 + 0 + 1 + 0 = **3**

**右邊（體積分）：**

$$\nabla \cdot \vec{F} = \frac{\partial x}{\partial x} + \frac{\partial y}{\partial y} + \frac{\partial z}{\partial z} = 1 + 1 + 1 = 3$$

$$\int_V 3\,dv = 3 \times (1 \times 1 \times 1) = \textbf{3}$$

左邊 = 右邊 = 3，散度定理驗證成功 ✓

---

### 4.2 Stokes 定理

$$\oint_C \vec{F} \cdot d\vec{l} = \int_S (\nabla \times \vec{F}) \cdot d\vec{S}$$

**白話解釋：** 一個向量場沿著**封閉路徑**走一圈的「環流量」，等於這個路徑**所圍面積上旋度的總和**。

想像一條河的漩渦：你拿一根繩子圍一圈量到的「水沿繩子流的總量」，等於圈起來的區域裡「所有小漩渦的總旋轉量」。

**用途：** 將線積分轉換為面積分（或反過來）。

### 📝 例題 6：Stokes 定理

**題目：** 向量場 $\vec{F} = -y\hat{x} + x\hat{y}$，C 是 xy 平面上半徑 2 的圓（逆時針），驗證 Stokes 定理。

**解：**

**左邊（線積分）：** 在圓上用參數式 $x = 2\cos\phi$, $y = 2\sin\phi$, $0 \leq \phi \leq 2\pi$

$$d\vec{l} = (-2\sin\phi\,d\phi)\hat{x} + (2\cos\phi\,d\phi)\hat{y}$$

$$\vec{F} \cdot d\vec{l} = (-2\sin\phi)(-2\sin\phi\,d\phi) + (2\cos\phi)(2\cos\phi\,d\phi)$$

$$= 4\sin^2\phi\,d\phi + 4\cos^2\phi\,d\phi = 4\,d\phi$$

$$\oint_C \vec{F} \cdot d\vec{l} = \int_0^{2\pi} 4\,d\phi = 4 \times 2\pi = \textbf{8π}$$

**右邊（面積分）：**

$$\nabla \times \vec{F} = \left(\frac{\partial x}{\partial x} - \frac{\partial(-y)}{\partial y}\right)\hat{z} = (1 + 1)\hat{z} = 2\hat{z}$$

$$\int_S 2\hat{z} \cdot (dA\,\hat{z}) = 2 \times \pi(2)^2 = 2 \times 4\pi = \textbf{8π}$$

左邊 = 右邊 = 8π，Stokes 定理驗證成功 ✓

---

## 五、重要的恆等式

以下恆等式在後續章節會反覆使用：

| 恆等式 | 物理意義 |
|--------|---------|
| $\nabla \times (\nabla f) = 0$ | 梯度場沒有旋度（靜電場是保守場） |
| $\nabla \cdot (\nabla \times \vec{F}) = 0$ | 旋度場沒有散度（磁場線永遠閉合） |
| $\nabla^2 f = \nabla \cdot (\nabla f)$ | 拉普拉斯算子（Laplacian） |

---

## 六、題型鑑別

| 看到什麼 | 用什麼方法 |
|---------|----------|
| 「求純量場的最大變化率方向」 | 梯度 ∇f |
| 「求通過封閉曲面的通量」 | 散度 ∇·F + 散度定理 |
| 「求沿封閉路徑的環流」 | 旋度 ∇×F + Stokes 定理 |
| 「圓柱形導線/管子」 | 用圓柱座標 |
| 「球形電荷分佈/點電荷」 | 用球座標 |
| 「平面結構、直角幾何」 | 用直角座標 |
| 「將面積分轉為體積分」 | 散度定理 |
| 「將線積分轉為面積分」 | Stokes 定理 |

---

## 關鍵術語表

| 中文 | 英文 | 白話解釋 | 例子 |
|------|------|---------|------|
| 純量 | Scalar | 只有大小的量 | 溫度 30°C |
| 向量 | Vector | 有大小和方向的量 | 速度 5 m/s 朝北 |
| 梯度 | Gradient | 純量場變化最快的方向與速率 | 山坡最陡的方向 |
| 散度 | Divergence | 向量場在某點「噴出」的程度 | 水龍頭噴水 |
| 旋度 | Curl | 向量場在某點「旋轉」的程度 | 漩渦中心 |
| 通量 | Flux | 穿過一個面的向量場總量 | 陽光照過窗戶 |
| 環流 | Circulation | 沿封閉路徑的向量場累積量 | 水繞圈流動 |
| 散度定理 | Divergence Theorem | 封閉面的通量 = 體積內散度的積分 | — |
| Stokes 定理 | Stokes' Theorem | 封閉路徑的環流 = 面積上旋度的積分 | — |
| 拉普拉斯算子 | Laplacian | ∇² = ∇·∇，二階微分算子 | 求電位分佈 |

---

## ✅ 自我檢測

### Q1：座標轉換
將球座標點 $(4, 60°, 30°)$ 轉換為直角座標。

<details><summary>點擊展開答案</summary>

$$x = r\sin\theta\cos\phi = 4\sin 60°\cos 30° = 4 \cdot \frac{\sqrt{3}}{2} \cdot \frac{\sqrt{3}}{2} = 4 \cdot \frac{3}{4} = 3$$

$$y = r\sin\theta\sin\phi = 4 \cdot \frac{\sqrt{3}}{2} \cdot \frac{1}{2} = \sqrt{3} \approx 1.732$$

$$z = r\cos\theta = 4\cos 60° = 4 \cdot \frac{1}{2} = 2$$

答：$(3, \sqrt{3}, 2)$

</details>

### Q2：梯度
若 $f = r^2\cos\theta$（球座標），求 $\nabla f$。

<details><summary>點擊展開答案</summary>

$$\frac{\partial f}{\partial r} = 2r\cos\theta$$

$$\frac{1}{r}\frac{\partial f}{\partial \theta} = \frac{1}{r}(-r^2\sin\theta) = -r\sin\theta$$

$$\frac{1}{r\sin\theta}\frac{\partial f}{\partial \phi} = 0$$

$$\nabla f = 2r\cos\theta\,\hat{r} - r\sin\theta\,\hat{\theta}$$

</details>

### Q3：散度
求 $\vec{F} = r^2\hat{r}$（球座標）的散度。

<details><summary>點擊展開答案</summary>

$$\nabla \cdot \vec{F} = \frac{1}{r^2}\frac{\partial(r^2 \cdot r^2)}{\partial r} = \frac{1}{r^2}\frac{\partial(r^4)}{\partial r} = \frac{4r^3}{r^2} = 4r$$

</details>

### Q4：旋度
若 $\vec{F} = yz\hat{x} + xz\hat{y} + xy\hat{z}$，$\nabla \times \vec{F} = ?$

<details><summary>點擊展開答案</summary>

$$(\nabla \times \vec{F})_x = \frac{\partial(xy)}{\partial y} - \frac{\partial(xz)}{\partial z} = x - x = 0$$

$$(\nabla \times \vec{F})_y = \frac{\partial(yz)}{\partial z} - \frac{\partial(xy)}{\partial x} = y - y = 0$$

$$(\nabla \times \vec{F})_z = \frac{\partial(xz)}{\partial x} - \frac{\partial(yz)}{\partial y} = z - z = 0$$

$$\nabla \times \vec{F} = \vec{0}$$

此場為保守場（irrotational），可以寫成某個純量場的梯度。事實上 $\vec{F} = \nabla(xyz)$。

</details>

### Q5：定理選擇
若要計算向量場 $\vec{A}$ 通過一個封閉曲面 S 的通量，但直接做面積分很困難，你應該用什麼定理？

<details><summary>點擊展開答案</summary>

用**散度定理（Divergence Theorem）**：

$$\oint_S \vec{A} \cdot d\vec{S} = \int_V (\nabla \cdot \vec{A})\,dv$$

先算散度 $\nabla \cdot \vec{A}$（通常是比較簡單的微分運算），再做體積分。

</details>

---

> **下一篇：** [em_02 靜電場與庫侖定律](em_02_靜電場與庫侖定律.md) — 進入電磁學的第一個核心主題！
